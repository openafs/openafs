.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "BACKUP_LABELTAPE 8"
.TH BACKUP_LABELTAPE 8 "2006-10-10" "OpenAFS" "AFS Command Reference"
.SH "NAME"
backup labeltape \- Creates the magnetic label on a tape
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBbackup labeltape\fR [\fB\-name\fR\ <\fI\s-1AFS\s0\ tape\ name,\ defaults\ to\ \s-1NULL\s0\fR>]
    [\fB\-size\fR\ <\fItape\ size\ in\ Kbytes,\ defaults\ to\ size\ in\ tapeconfig\fR>]
    [\fB\-portoffset\fR\ <\fI\s-1TC\s0\ port\ offset\fR>] [\fB\-pname\fR\ <\fIpermanent\ tape\ name\fR>]
    [\fB\-localauth\fR] [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-help\fR]
.PP
\&\fBbackup la\fR [\fB\-n\fR\ <\fI\s-1AFS\s0\ tape\ name,\ defaults\ to\ \s-1NULL\s0\fR>]
    [\fB\-s\fR\ <\fItape\ size\ in\ Kbytes,\ defaults\ to\ size\ in\ tapeconfig\fR>]
    [\fB\-po\fR\ <\fI\s-1TC\s0\ port\ offset\fR>] [\fB\-pn\fR\ <\fIpermanent\ tape\ name\fR>]
    [\fB\-l\fR] [\fB\-c\fR\ <\fIcell\ name\fR>] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBbackup labeltape\fR command creates a magnetic label, readable by the
Backup System, at the beginning of a tape. The label records the tape's
name (either a \fIpermanent name\fR, or an \fI\s-1AFS\s0 tape name\fR that reflects the
tape's contents in a prescribed format) and its capacity.
.PP
(If the \f(CW\*(C`FILE YES\*(C'\fR instruction appears in the
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file on the Tape Coordinator machine
associated with the specified port offset, then the \fBbackup\fR command
writes label information to the first 16 \s-1KB\s0 block in the backup data file
listed for that port offset in the Tape Coordinator's
\&\fI/usr/afs/backup/tapeconfig\fR file, rather than at the beginning of a
tape. For the sake of clarity, the following text refers to tapes only,
but the Backup System handles backup data files in much the same way.)
.PP
Relabeling a tape that already contains \s-1AFS\s0 backup data effectively makes
the data unusable, because the command removes the Backup Database record
of the complete dump set of which the tape is a part. Use this command to
enable recycling of a tape that contains unexpired dumps that are not
actually still needed.
.PP
To write a permanent name on the label, include the \fB\-pname\fR argument to
specify a string of up to 32 characters. The permanent name persists until
the \fB\-pname\fR argument is again included on the \fBbackup labeltape\fR
command, regardless of the tape's contents and of how often the tape is
otherwise relabeled or recycled. Include this argument or the \fB\-name\fR
argument, but not both. If this argument is included, the \s-1AFS\s0 tape name is
set to \f(CW\*(C`<NULL>\*(C'\fR.  The permanent name is set to \f(CW\*(C`<NULL>\*(C'\fR if this
argument is omitted and no permanent name already exists.
.PP
The issuer must ensure that a permanent name is unique among the tapes
used for \s-1AFS\s0 backup in the cell, because the \fBbackup\fR command interpreter
does not verify that another tape does not already have the same permanent
name. When a tape has a permanent name, the Backup System uses it instead
of the \s-1AFS\s0 tape name in most prompts and when referring to the tape in
output from \fBbackup\fR commands. The permanent name appears in the \f(CW\*(C`tape
name\*(C'\fR field of the output from the \fBbackup readlabel\fR command.
.PP
To write an \s-1AFS\s0 tape name on the label, provide a value for the \fB\-name\fR
argument in the required format described in \s-1OPTIONS\s0.  Include the
\&\fB\-name\fR argument or the \fB\-pname\fR argument, but not both. If this
argument is omitted, the \s-1AFS\s0 tape name is set to \f(CW\*(C`<NULL>\*(C'\fR, but the
Backup System automatically assigns the appropriate name when the tape is
used in a future \fBbackup dump\fR or \fBbackup savedb\fR operation.  The \s-1AFS\s0
tape name appears in the \f(CW\*(C`AFS tape name\*(C'\fR field of the output from the
\&\fBbackup readlabel\fR and \fBbackup scantape\fR commands.
.PP
The backup command interpreter does not accept the \fB\-name\fR argument if
the tape already has a permanent name. To erase a tape's permanent name,
provide a null value to the \fB\-pname\fR argument by issuing the following
command:
.PP
.Vb 1
\&   % backup labeltape \-pname ""
.Ve
.PP
To record the tape's capacity on the label, specify a number of kilobytes
as the \fB\-size\fR argument. If the argument is omitted the first time a tape
is labeled, the Backup System records the default tape capacity recorded
for the specified port offset in the \fI/usr/afs/backup/tapeconfig\fR file on
the Tape Coordinator machine. Subsequently, the value in the size field
persists until the \fB\-size\fR argument is again included on the \fBbackup
labeltape\fR command.
.PP
To determine how much data can be written to a tape during a backup dump
or \fBbackup savedb\fR operation, the Tape Coordinator reads the capacity
recorded on the tape's label (or uses the value associated with its port
offset in the \fI/usr/afs/backup/tapeconfig\fR file, if the tape was never
labeled). For further description, see the \fBbackup dump\fR reference page.
.PP
The Tape Coordinator's default response to this command is to access the
tape by invoking the \f(CW\*(C`MOUNT\*(C'\fR instruction in the local
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file, or by prompting the backup
operator to insert the tape if there is no \f(CW\*(C`MOUNT\*(C'\fR instruction. However,
if the \f(CW\*(C`AUTOQUERY NO\*(C'\fR instruction appears in the \fI\s-1CFG_\s0\fIdevice_name\fI\fR
file, or if the issuer of the \fBbutc\fR command included the \fB\-noautoquery\fR
flag, the Tape Coordinator instead expects the tape to be in the device
already.  If it is not, the Tape Coordinator invokes the \f(CW\*(C`MOUNT\*(C'\fR
instruction or prompts the operator.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-name\fR <\fI\s-1AFS\s0 tape name\fR>" 4
.IX Item "-name <AFS tape name>"
Specifies the \s-1AFS\s0 tape name to record on the label. Include this argument
or the \fB\-pname\fR argument, but not both. If this argument is omitted, the
\&\s-1AFS\s0 tape name is set to \f(CW\*(C`<NULL>\*(C'\fR.  If this argument is provided, it
must have the following format:
.Sp
.Vb 1
\&   <volume_set_name>.<dump_level_name>.<tape_index>
.Ve
.Sp
for the tape to be acceptable for use in a future backup dump
operation. The <volume_set_name> must match the volume set name of the
initial dump to be written to the tape, <dump_level_name> must match the
last element of the dump level pathname at which the volume set will be
dumped, and <tape_index> indicates the order of the tape in the dump set
(indexing begins with \f(CW1\fR). To disable this type of name checking,
include the \f(CW\*(C`NAME_CHECK NO\*(C'\fR instruction in the \fI\s-1CFG_\s0\fIdevice_name\fI\fR
file.
.Sp
For the tape to be acceptable for use in a future backup savedb operation,
the value specified for the \fB\-name\fR argument must have the following
format:
.Sp
.Vb 1
\&   Ubik_db_dump.<tape_index>
.Ve
.Sp
where <tape_index> indicates the order of the tape in the set of tapes
that house the Backup Database dump; indexing begins with \f(CW1\fR (one).
.IP "\fB\-size\fR <\fItape size\fR>" 4
.IX Item "-size <tape size>"
Specifies the tape capacity to record on the label. Provide an integer
value followed by a letter that indicates units, with no intervening
space. A unit value of \f(CW\*(C`k\*(C'\fR or \f(CW\*(C`K\*(C'\fR indicates kilobytes, \f(CW\*(C`m\*(C'\fR or \f(CW\*(C`M\*(C'\fR
indicates megabytes, and \f(CW\*(C`g\*(C'\fR or \f(CW\*(C`G\*(C'\fR indicates gigabytes. If the units
letter is omitted, the default is kilobytes.
.Sp
If this argument is omitted the first time a tape is labeled, the Backup
System records the capacity that is associated with the specified port
offset in the \fI/usr/afs/backup/tapeconfig\fR file on the Tape Coordinator
machine. The value recorded the first time then persists until the
\&\fB\-size\fR argument is provided on a future issuance of the command.
.IP "\fB\-portoffset\fR <\fI\s-1TC\s0 port offset\fR>" 4
.IX Item "-portoffset <TC port offset>"
Specifies the port offset number of the Tape Coordinator handling the tape
for this operation.
.IP "\fB\-pname\fR <\fIpermanent tape name\fR>" 4
.IX Item "-pname <permanent tape name>"
Specifies the permanent name to record on the label. It can be up to 32
characters in length, and include any alphanumeric characters.  Avoid
metacharacters that have a special meaning to the shell, to avoid having
to mark them as literal in commands issued at the shell prompt.
.Sp
Include this argument or the \fB\-name\fR argument, but not both. If this
argument is provided, the \s-1AFS\s0 tape name is set to \f(CW\*(C`<NULL>\*(C'\fR. If this
argument is omitted, any existing permanent name is retained.
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBbackup\fR command interpreter presents
it to the Backup Server, Volume Server and \s-1VL\s0 Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument. For
more details, see \fIbackup\fR\|(8).
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIbackup\fR\|(8).
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command records the \s-1AFS\s0 tape name \f(CW\*(C`user.monthly.1\*(C'\fR on the
label of the tape in the device with port offset 3:
.PP
.Vb 1
\&   % backup labeltape \-name user.monthly.1 \-portoffset 3
.Ve
.PP
The following three commands are equivalent in effect: they all record a
capacity of 2 \s-1GB\s0 on the label of the tape in the device with port offset
4. They set the \s-1AFS\s0 tape name to \f(CW\*(C`<NULL>\*(C'\fR and leave the permanent
name unchanged.
.PP
.Vb 3
\&   % backup labeltape \-size 2g \-portoffset 4
\&   % backup labeltape \-size 2048M \-portoffset 4
\&   % backup labeltape \-size 2097152 \-portoffset 4
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on every
machine where the Backup Server is running, or must be logged onto a
server machine as the local superuser \f(CW\*(C`root\*(C'\fR if the \fB\-localauth\fR flag is
included.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbutc\fR\|(5),
\&\fIbackup\fR\|(8),
\&\fIbackup_readlabel\fR\|(8),
\&\fIbutc\fR\|(8)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
