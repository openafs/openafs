.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "FMS 8"
.TH FMS 8 "2006-10-10" "OpenAFS" "AFS Command Reference"
.SH "NAME"
fms \- Determine a tape's capacity and a tape device's filemark size
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBfms\fR \fB\-tape\fR\ <\fItape\ special\ file\fR> [\fB\-help\fR]
.PP
\&\fBfms\fR \fB\-t\fR\ <\fItape\ special\ file\fR> [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBfms\fR command determines the capacity of the tape currently in the
tape device identified by the \fB\-tape\fR argument, along with the size of
the filemark for the device. The filemark is also referred to as the
device's end-of-file (\s-1EOF\s0) marker, and can differ for each combination of
tape and tape device.
.PP
As the Tape Coordinator writes a dump, it writes a filemark between the
data included from each volume and also tracks the amount of space left
before the end of the tape (\s-1EOT\s0). For some tape devices, the filemark is
large enough (multiple megabytes) that failure to consider it leads the
Tape Coordinator significantly to overestimate the available space.
.PP
The intended use of this command is to determine tape capacity and
filemark size values that can be specified in a tape device's entry in the
\&\fI/usr/afs/backup/tapeconfig\fR file. For certain types of tape drives, the
Tape Coordinator operates more efficiently when the \fItapeconfig\fR file
lists accurate values. For further discussion, see the \fI\s-1IBM\s0 \s-1AFS\s0
Administration Guide\fR chapter on configuring the Backup System.
.PP
Insert a tape in the drive before issuing this command.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Do not use this command on compressing tape devices in compression mode or
with tape devices that handle tapes of multigigabyte (or multiterabyte)
capacity. It does not produce accurate results in those cases.  For
alternate suggestions on the values to record in the \fBtapeconfig\fR file
for compressing drives, see the \fI\s-1IBM\s0 \s-1AFS\s0 Administration Guide\fR chapter on
configuring the Backup System.
.PP
Running the command completely overwrites the tape, so use a blank one or
one that can be recycled.
.PP
Because it writes filemarks to the complete length of the tape, the
command can take from several hours to more than a day to complete.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-tape\fR <\fItape special file\fR>" 4
.IX Item "-tape <tape special file>"
Specifies the \s-1UNIX\s0 device name of the tape device for which to determine
filemark size and the capacity of the tape it currently contains. The
format varies on different system types, but usually begins with \fI/dev\fR;
an example is \fI/dev/sd0a\fR.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
The command generates output both on the standard output stream and in the
\&\fIfms.log\fR file that it creates in the current working directory. The
output reports the capacity of the tape in the device and the device's
filemark size.
.PP
The first few lines of output include status information about the
execution of the command, including such information as the number of
blocks and the number of file marks written to the tape by the
command. The last two lines of both screen and file output provide the
following information:
.IP "\(bu" 4
\&\f(CW\*(C`Tape capacity is \f(CInumber\f(CW bytes\*(C'\fR: specifies the size, in bytes, of the
tape in the device.
.IP "\(bu" 4
\&\f(CW\*(C`File marks are \f(CInumber\f(CW bytes\*(C'\fR: specifies the device's filemark size in
bytes.
.PP
The following message indicates that the fms command interpreter cannot
access the tape device. The command halts.
.PP
.Vb 1
\&   Can't open tape drive I<device>
.Ve
.PP
The following message indicates that the command interpreter cannot create
the \fIfms.log\fR log file. Again, the command halts.
.PP
.Vb 1
\&   Can't open log file
.Ve
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command illustrates the output for the device called
\&\fI/dev/rmt1h\fR:
.PP
.Vb 7
\&   % fms /dev/rmt1h
\&   wrote block: 130408
\&   Finished data capacity test \- rewinding
\&   wrote 1109 blocks, 1109 file marks
\&   Finished file mark test
\&   Tape capacity is 2136604672 bytes
\&   File marks are 1910205 bytes
.Ve
.PP
The following appears in the \fIfms.log\fR file:
.PP
.Vb 5
\&   fms test started
\&   wrote 9230 blocks
\&   Finished file mark test
\&   Tape capacity is 151224320 bytes
\&   File marks are 2375680 bytes
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be able to insert and write to files in the currently
working directory, if the \fIfms.log\fR file does not already exist. If it
already exists, the issuer need only be able to write to it.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIfms.log\fR\|(5),
\&\fItapeconfig\fR\|(5)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
