.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "FS_CLEANACL 1"
.TH FS_CLEANACL 1 "2006-10-10" "OpenAFS" "AFS Command Reference"
.SH "NAME"
fs cleanacl \- Remove obsolete entries from an ACL
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBfs cleanacl\fR [\fB\-path\fR\ <\fIdir/file\ path\fR>+] [\fB\-help\fR]
.PP
\&\fBfs cl\fR [\fB\-p\fR\ <\fIdir/file\ path\fR>+] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBfs cleanacl\fR command removes from the access control list (\s-1ACL\s0) of
each specified directory or file any entry that refers to a user or group
that no longer has a Protection Database entry. Such an entry appears on
the \s-1ACL\s0 as an \s-1AFS\s0 user \s-1ID\s0 number (\s-1UID\s0) rather than a name, because without
a Protection Database entry, the File Server cannot translate the \s-1UID\s0 into
a name.
.PP
Cleaning access control lists in this way not only keeps them from
becoming crowded with irrelevant information, but also prevents the new
possessor of a recycled \s-1AFS\s0 \s-1UID\s0 from obtaining access intended for the
former possessor of the \s-1AFS\s0 \s-1UID\s0. (Note that recycling UIDs is not
recommended in any case.)
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-path\fR <\fIdir/file path\fR>+" 4
.IX Item "-path <dir/file path>+"
Names each directory for which to clean the \s-1ACL\s0 (specifying a filename
cleans its directory's \s-1ACL\s0). If this argument is omitted, the current
working directory's \s-1ACL\s0 is cleaned.
.Sp
Specify the read/write path to each directory, to avoid the failure that
results from attempting to change a read-only volume. By convention, the
read/write path is indicated by placing a period before the cell name at
the pathname's second level (for example, \fI/afs/.abc.com\fR). For further
discussion of the concept of read/write and read-only paths through the
filespace, see the \fBfs mkmount\fR reference page.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
If there are no obsolete entries on the \s-1ACL\s0, the following message
appears:
.PP
.Vb 1
\&   Access list for <path> is fine.
.Ve
.PP
Otherwise, the output reports the resulting state of the \s-1ACL\s0, following the
header
.PP
.Vb 1
\&   Access list for <path> is now
.Ve
.PP
At the same time, the following error message appears for each file in the
cleaned directories:
.PP
.Vb 1
\&   fs: '<filename>': Not a directory
.Ve
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example illustrates the cleaning of the ACLs on the current
working directory and two of its subdirectories. Only the second
subdirectory had obsolete entries on it.
.PP
.Vb 7
\&   % fs cleanacl \-path . ./reports ./sources
\&   Access list for . is fine.
\&   Access list for ./reports is fine.
\&   Access list for ./sources is now
\&   Normal rights:
\&      system:authuser rl
\&      pat rlidwka
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must have the \f(CW\*(C`a\*(C'\fR (administer) permission on each directory's
\&\s-1ACL\s0 (or the \s-1ACL\s0 of each file's parent directory); the directory's owner
and the members of the system:administrators group have the right
implicitly, even if it does not appear on the \s-1ACL\s0.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIfs_listacl\fR\|(1),
\&\fIfs_mkmount\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
