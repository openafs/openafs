.\" Automatically generated by Pod::Man 2.12 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_CHANGELOC 1"
.TH VOS_CHANGELOC 1 "2009-07-31" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_changeloc \- Change a volume's entry in the VLDB
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos changeloc\fR [\fB\-server\fR]\ <\fInew\ server\ name\fR>
   [\fB\-partition\fR]\ <\fInew\ partition\ location\fR>
   [\fB\-id\fR]\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
   [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noauth\fR] [\fB\-localauth\fR]
   [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-help\fR]
.PP
\&\fBvos changel\fR [\fB\-s\fR]\ <\fInew\ server\ name\fR>
   [\fB\-p\fR]\ <\fInew\ partition\ location\fR>
   [\fB\-i\fR]\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
   [\fB\-c\fR\ <\fIcell\ name\fR>] [\fB\-n\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-e\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos changeloc\fR command changes the location of a volume in the
Volume Location Database (\s-1VLDB\s0) without needing to contact the original
file server on which the volume was hosted. This is useful when a file
server has gone down permanently and the data that was stored on that
server has been moved to a new file server with a different name and \s-1IP\s0
address (perhaps by mounting the same /vicepX partitions on a different
host). After moving the data and running \fBvos changeloc\fR, run \fBvos
syncvldb\fR and then \fBvos syncserv\fR against the new server to ensure full
synchronization of the \s-1VLDB\s0 with the file server.
.PP
In essence, \fBvos changeloc\fR performs the same operations on the \s-1VLDB\s0 as
\&\fBvos move\fR, but it does \s-1NOT\s0 move the data from one server's file system
to another.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Using \fBvos changeloc\fR changes the \s-1VLDB\s0 without modifying the file server
data, so it inherently causes the \s-1VLDB\s0 to be out of sync with the data on
the servers. It should only be used when recovering from server failure.
If the servers are on-line, \fBvos move\fR should be used instead. It is
highly recommended that \fBvos syncvldb\fR and \fBvos syncserv\fR be run after
using the \fBvos changeloc\fR command to ensure properly synchronization of
the \s-1VLDB\s0 with the file servers.
.SH "OPTIONS"
.IX Header "OPTIONS"
\&\fBvos changeloc\fR takes the following options:
.IP "\fB\-server\fR <\fInew server name\fR>" 4
.IX Item "-server <new server name>"
Specifies the new server where the \s-1VLDB\s0 should believe the volume resides.
Provide the machine's \s-1IP\s0 address or its host name (either fully qualified
or using an unambiguous abbreviation). For details, see \fIvos\fR\|(1).
.IP "\fB\-partition\fR <\fIpartition name\fR>" 4
.IX Item "-partition <partition name>"
Specifies the partition where the \s-1VLDB\s0 should believe the volume resides.
entries. Provide the \fB\-server\fR argument along with this one. Provide the
partition's complete name with preceding slash (for example, \f(CW\*(C`/vicepa\*(C'\fR)
or use one of the three acceptable abbreviated forms. For details, see
\&\fIvos\fR\|(1).
.IP "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
.IX Item "-id <volume name or ID>"
Specifies the name or volume \s-1ID\s0 number on which to operate.
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity \f(CW\*(C`anonymous\*(C'\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
\&\fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the commands that are sent to the server.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
\&\fBvos changeloc\fR shows a brief message upon completion:
.PP
.Vb 1
\&   Changed location to server2 /vicepa for volume user.jdoe
.Ve
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command changes the location of the \f(CW\*(C`user.jdoe\*(C'\fR volume to
be \fI/vicepa\fR on the file server machine \f(CW\*(C`server2\*(C'\fR while being verbose:
.PP
.Vb 3
\&   % vos changeloc server2 a user.jdoe \-verbose
\&    done
\&   Changed location to server2 /vicepa for volume user.jdoe
.Ve
.PP
The following command changes the location of the \f(CW\*(C`user.jdoe\*(C'\fR volume to
be \fI/vicepa\fR on \f(CW\*(C`server1\*(C'\fR without being verbose:
.PP
.Vb 2
\&   % vos changeloc server1 a user.jdoe
\&   Changed location to server1 /vicepa for volume user.jdoe
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on each
database server machine. If the \fB\-localauth\fR flag is included, the issuer
must instead be logged on to a server machine as the local superuser
\&\f(CW\*(C`root\*(C'\fR.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIvos\fR\|(1),
\&\fIvos_move\fR\|(1),
\&\fIvos_syncserv\fR\|(1),
\&\fIvos_syncvldb\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright 2007 Jason Edgecombe <jason@rampaginggeek.com>
.PP
This documentation is covered by the \s-1BSD\s0 License as written in the
doc/LICENSE file. This man page was written by Jason Edgecombe for
OpenAFS.
