<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 4//EN">
<HTML><HEAD>
<TITLE>Administration Reference</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- /tmp/idwt3672/auarf000.scr converted by idb2h R4.2 (359) ID      -->
<!-- Workbench Version (AIX) on 3 Oct 2000 at 16:18:30                -->
<META HTTP-EQUIV="updated" CONTENT="Tue, 03 Oct 2000 16:18:29">
<META HTTP-EQUIV="review" CONTENT="Wed, 03 Oct 2001 16:18:29">
<META HTTP-EQUIV="expires" CONTENT="Thu, 03 Oct 2002 16:18:29">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>Administration Reference</H1>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf123.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Bot_Of_Page"><IMG SRC="../bot.gif" BORDER="0" ALT="[Bottom of Topic]"></A> <A HREF="auarf125.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<P>
<H2><A NAME="HDRBOSSERVER" HREF="auarf002.htm#ToC_138">bosserver</A></H2>
<A NAME="IDX4680"></A>
<A NAME="IDX4681"></A>
<A NAME="IDX4682"></A>
<P><STRONG>Purpose</STRONG>
<P>Initializes the BOS Server
<P><STRONG>Synopsis</STRONG>
<PRE><B>bosserver</B> [<B>-noauth</B>]  [<B>-log</B>]  [<B>-enable_peer_stats</B>]  [<B>-enable_process_stats</B>]  
          [<B>-help</B>]
</PRE>
<P>This command does not use the syntax conventions of the AFS command
suites. Provide the command name and all option names in full.
<P><STRONG>Description</STRONG>
<P>The <B>bosserver</B> command initializes the Basic OverSeer (BOS)
Server (<B>bosserver</B> process). In the conventional
configuration, the binary file is located in the <B>/usr/afs/bin</B>
directory on a file server machine.
<P>The BOS Server must run on every file server machine and helps to automate
file server administration by performing the following tasks:
<UL>
<P><LI>Monitors the other AFS server processes on the local machine, to make sure
they are running correctly.
<P><LI>Automatically restarts failed processes, without contacting a human
operator. When restarting multiple server processes simultaneously, the
BOS Server takes interdependencies into account and initiates restarts in the
correct order.
<A NAME="IDX4683"></A>
<A NAME="IDX4684"></A>
<P><LI>Processes commands from the <B>bos</B> suite that administrators issue
to verify the status of server processes, install and start new processes,
stop processes either temporarily or permanently, and restart halted
processes.
<P><LI>Manages system configuration information: the files that list the
cell's server encryption keys, database server machines, and users
privileged to issue commands from the <B>bos</B> and <B>vos</B>
suites.
</UL>
<P>The BOS Server logs a default set of important events in the file
<B>/usr/afs/logs/BosLog</B>. To record the name of any user who
performs a privileged <B>bos</B> command (one that requires being listed
in the <B>/usr/afs/etc/UserList</B> file), add the <B>-log</B>
flag. To display the contents of the <B>BosLog</B> file, use the
<B>bos getlog</B> command.
<P>The first time that the BOS Server initializes on a server machine, it
creates several files and subdirectories in the local <B>/usr/afs</B>
directory, and sets their mode bits to protect them from unauthorized
access. Each time it restarts, it checks that the mode bits still
comply with the settings listed in the following chart. A question mark
indicates that the BOS Server initially turns off the bit (sets it to the
hyphen), but does not check it at restart.
<BR>
<TABLE WIDTH="100%">
<TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwxr</TT>?<TT>xr-x</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/backup</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwx</TT>???<TT>---</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/bin</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwxr</TT>?<TT>xr-x</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/db</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwx</TT>???<TT>---</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/etc</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwxr</TT>?<TT>xr-x</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/etc/KeyFile</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>-rw</TT>????<TT>---</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/etc/UserList</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>-rw</TT>?????<TT>--</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/local</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwx</TT>???<TT>---</TT>
</TD></TR><TR>
<TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><B>/usr/afs/logs</B>
</TD><TD ALIGN="LEFT" VALIGN="TOP" WIDTH="50%"><TT>drwxr</TT>?<TT>xr-x</TT>
</TD></TR></TABLE>
<P>If the mode bits do not comply, the BOS Server writes the following warning
to the <B>BosLog</B> file:
<PRE>   Bosserver reports inappropriate access on server directories
   
</PRE>
<P>However, the BOS Server does not reset the mode bits, so the administrator
can set them to alternate values if desired (with the understanding that the
warning message then appears at startup).
<P><STRONG>Options</STRONG>
<DL>
<P><DT><B>-noauth
</B><DD>Assigns the unprivileged identity <B>anonymous</B> to the issuer,
which is useful only when authorization checking is disabled on the server
machine (for instance, during the installation of a file server
machine.)
<P><DT><B>-log
</B><DD>Records in the <B>/usr/afs/logs/BosLog</B> file the names of all users
who successfully issue a privileged <B>bos</B> command (one that requires
being listed in the <B>/usr/afs/etc/UserList</B> file).
<P><DT><B>-enable_peer_stats
</B><DD>Activates the collection of Rx statistics and allocates memory for their
storage. For each connection with a specific UDP port on another
machine, a separate record is kept for each type of RPC (FetchFile, GetStatus,
and so on) sent or received. To display or otherwise access the
records, use the Rx Monitoring API.
<P><DT><B>-enable_process_stats
</B><DD>Activates the collection of Rx statistics and allocates memory for their
storage. A separate record is kept for each type of RPC (FetchFile,
GetStatus, and so on) sent or received, aggregated over all connections to
other machines. To display or otherwise access the records, use the Rx
Monitoring API.
<P><DT><B>-help
</B><DD>Prints the online help for this command. All other valid options
are ignored.
</DL>
<P><STRONG>Examples</STRONG>
<P>The following command initializes the BOS Server and logs the names of
users who issue privileged <B>bos</B> commands.
<PRE>   % <B>bosserver -log &amp;</B>
   
</PRE>
<P><STRONG>Privilege Required</STRONG>
<P>The issuer most be logged onto a file server machine as the local superuser
<B>root</B>.
<P><STRONG>Related Information</STRONG>
<P><A HREF="auarf016.htm#HDRBOSCONFIG">BosConfig</A>
<P><A HREF="auarf015.htm#HDRBOSLOG">BosLog</A>
<P><A HREF="auarf093.htm#HDRBOS_INTRO">bos</A>
<P><A HREF="auarf098.htm#HDRBOS_CREATE">bos create</A>
<P><A HREF="auarf100.htm#HDRBOS_EXEC">bos exec</A>
<P><A HREF="auarf102.htm#HDRBOS_GETLOG">bos getlog</A>
<P><A HREF="auarf103.htm#HDRBOS_GETRESTART">bos getrestart</A>
<P><A HREF="auarf113.htm#HDRBOS_RESTART">bos restart</A>
<P><A HREF="auarf118.htm#HDRBOS_SHUTDOWN">bos shutdown</A>
<P><A HREF="auarf119.htm#HDRBOS_START">bos start</A>
<P><A HREF="auarf120.htm#HDRBOS_STARTUP">bos startup</A>
<P><A HREF="auarf121.htm#HDRBOS_STATUS">bos status</A>
<P><A HREF="auarf122.htm#HDRBOS_STOP">bos stop</A>
<P>
<HR><P ALIGN="center"> <A HREF="../index.htm"><IMG SRC="../books.gif" BORDER="0" ALT="[Return to Library]"></A> <A HREF="auarf002.htm#ToC"><IMG SRC="../toc.gif" BORDER="0" ALT="[Contents]"></A> <A HREF="auarf123.htm"><IMG SRC="../prev.gif" BORDER="0" ALT="[Previous Topic]"></A> <A HREF="#Top_Of_Page"><IMG SRC="../top.gif" BORDER="0" ALT="[Top of Topic]"></A> <A HREF="auarf125.htm"><IMG SRC="../next.gif" BORDER="0" ALT="[Next Topic]"></A> <A HREF="auarf284.htm#HDRINDEX"><IMG SRC="../index.gif" BORDER="0" ALT="[Index]"></A> <P> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>&#169; <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
