<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRAFSD" HREF="auarf002.htm#ToC_72">afsd</A></H2>
<A NAME="IDX4184"></A>
<A NAME="IDX4185"></A>
<A NAME="IDX4186"></A>
<A NAME="IDX4187"></A>
<A NAME="IDX4188"></A>
<A NAME="IDX4189"></A>
<A NAME="IDX4190"></A>
<A NAME="IDX4191"></A>
<P><STRONG>目的</STRONG>
<P>キャッシュ・マネージャーの初期化および関連デーモンを開始します。
<P><STRONG>構文</STRONG>
<PRE><B>afsd</B> [-<B>blocks</B> &lt;<VAR>1024 byte blocks in cache</VAR>>]  
     [<B>-files</B> &lt;<VAR>files in cache</VAR>>]
     [<B>-rootvol</B> &lt;<VAR>name of AFS root volume</VAR>>]
     [<B>-stat</B> &lt;<VAR>number of stat entries</VAR>>]
     [<B>-memcache</B>]  [<B>-cachedir</B> &lt;<VAR>cache directory</VAR>>]  
     [<B>-mountdir</B> &lt;<VAR>mount location</VAR>>]
     [<B>-daemons</B> &lt;<VAR>number of daemons to use</VAR>>]  
     [<B>-nosettime</B>]  [<B>-verbose</B>]  [<B>-rmtsys</B>]  [<B>-debug</B>]  
     [<B>-chunksize</B> &lt;<VAR>log(2) of chunk size</VAR>>]
     [<B>-dcache</B> &lt;<VAR>number of dcache entries</VAR>>]
     [<B>-volumes</B> &lt;<VAR>number of volume entries</VAR>>]  
     [<B>-biods</B> &lt;<VAR>number of bkg I/O daemons (aix vm)</VAR>>]
     [<B>-prealloc</B> &lt;<VAR>number of 'small' preallocated blocks</VAR>>]
     [<B>-confdir</B> &lt;<VAR>configuration directory</VAR>>]
     [<B>-logfile</B> &lt;<VAR>Place to keep the CM log</VAR>>]  
     [<B>-waitclose</B>]  [<B>-shutdown</B>]  [<B>-enable_peer_stats</B>]  
     [<B>-enable_process_stats</B>]  [<B>-help</B>]
</PRE>
<P>このコマンドは、AFS コマンド・セットの構文規則に準拠していません。コマンド名およびすべてのオプション名は省略せずにすべて指定してください。
<P><STRONG>構文</STRONG>
<P><B>afsd</B> コマンドは、AFS に関連する構成情報をカーネル・メモリーに転送し、いくつかのデーモンを開始して、AFS クライアント上のキャッシュ・マネージャーを初期化します。具体的には、<B>afsd</B> コマンドは、次の操作を行います。
<UL>
<LI>マシンのセル・メンバーシップを定義するフィールドをカーネル・メモリーに設定します。キャッシュ・マネージャーの内部操作およびシステム・コールは、このフィールドを参照して、実行中のセルを判別します。
(AFS コマンド・インタープリターは、
<B>/usr/vice/etc/ThisCell</B> ファイルを参照します。)
この情報は、
<B>/usr/vice/etc/ThisCell</B> ファイルからカーネルに転送され、
<B>afsd</B> プログラムを再実行するまで変更できません。
</LI><LI>ローカル・セルおよび外部セル (オプション) にあるデータベース・サーバー・マシンの名前および IP アドレスをカーネル・メモリーに配置します。セルのデータベース・サーバー・マシンがこのリストに入ると、キャッシュ・マネージャーは、このリストを参照して、セル内のファイルにアクセスすることができます。このリストからセルが削除されたり、そのデータベース・サーバー・マシンについて誤った情報があると、キャッシュ・マネージャーは、そのセルのファイルにアクセスできなくなります。
<P>
<P>データベース・サーバー・マシンのリストは、
<B>/usr/vice/etc/CellServDB</B> ファイルからカーネルに転送されます。初期化後 <B>fs newcell</B> コマンドを使用して、リブートせずにカーネルに常駐するリストを変更します。
</LI><LI><B>/usr/vice/etc/cacheinfo</B> ファイル (デフォルト) の最初のフィールド、または <B>n</B> コマンドの <B>-mountdir</B> 引き数に従って、マシンのローカル・ディスクのディレクトリーに AFS ファイル・スペースのルートをマウントしてください。通常この値は、<B>/afs</B> です。
</LI><LI>AFS ファイル・ツリーのルートに取り付けるボリュームを決定します。デフォルトは、ボリューム <B>root.afs</B> です。これを上書きする場合には、<B>-rootvol</B> 引き数を使用してください。ボリューム名の基本 (読み取り / 書き込み) 形式は適正値ですが、キャッシュ・マネージャーには、使用可能であれば、ボリュームの読み取り専用バージョン (規則では、
<B>root.afs.readonly</B>) にアクセスするためのバイアスがあります。
</LI><LI><B>-memcache</B> 引き数が指定されている場合は、ディスク (デフォルトです) または、マシン・メモリーにキャッシュを構成します。後者の場合、<B>afsd</B> プログラムは、キャッシュ用にマシン・メモリーにスペースを割り振り、キャッシュ・マネージャーは、マシンにディスクが取り付けられていても、ディスクをキャッシュに使用しません。
</LI><LI><B>-memcache</B> 引き数が指定されていなければ、キャッシュ専用のローカル・ディスク・ディレクトリー名を定義します。必要ならば、the <B>afsd</B> プログラムは、ディレクトリー (この親ディレクトリーは、作成済みでなければなりません) を作成します。これが存在する場合、以前にこの機能を使用していたディレクトリーは削除されません。
<P>
<P><B>/usr/vice/etc/cacheinfo</B> ファイルの 2 番目のフィールドはこの名前の元になっています。標準値は <B>/usr/vice/cache</B> ディレクトリーです。
<B>cacheinfo</B> ファイルの値を上書きする場合には、
<B>-cachedir</B> 引き数を使用してください。
</LI><LI>キャッシュのサイズを設定します。キャッシュ・サイズの値は、デフォルトでは <B>/usr/vice/etc/cacheinfo</B> ファイルの 3 番目のフィールドを元にします。キロバイト単位で指定します。
<P>
<P>メモリー・キャッシュの場合、<B>afsd</B> コマンドの引き数のうち、次のいずれかの引き数で、<B> cacheinfo</B> ファイルの値を上書きします。
<UL>
<LI>異なる KB ブロック数を指定する場合には、
<B>-blocks</B> 引き数を使用してください。
</LI><LI>dcache 項目の数とチャンク・サイズの両方を設定する場合は、
<B>-dcache</B> および <B>-chunksize</B> 引き数を両方とも指定してください (これらのパラメーターの定義については、以下を参照してください)。この場合、<B>afsd</B> プログラムは、この 2 つの値を掛けて、キャッシュ・サイズを算出します。計算を実行する前にキャッシュ ・サイズの結果を調べる必要がある場合には、この組み合わせの引き数は使用しないでください。
</LI><LI><B>-dcache</B> 引き数だけを使用します。この場合、<B>afsd</B> プログラムは、デフォルトのメモリー・キャッシュ・チャンク・サイズである 8 KB を <B>-dcache</B> 引き数で指定された値に掛けて、キャッシュ・サイズを算出します。計算を実行する前にキャッシュ ・サイズの結果を調べる必要がある場合には、この引き数は使用しないでください。
</LI></UL>
<P>
<P>満足のいくメモリー・キャッシュ性能を得るには、他のプロセスおよびコマンドがマシン上で実行できるように十分なメモリー・スペースを残しておく必要があります。この値が使用可能なメモリーのサイズを超えると、
<B>afsd</B> プログラムは、キャッシュ・マネージャーを初期化せずに終了し、標準出力ストリームに次のメッセージを出力します。
<P>
<PRE>   afsd: <VAR>number</VAR> KB での memCache の割り振りに失敗しました。
   
</PRE>
<P>
<P>ここで、<VAR>number</VAR> は、障害発生直前に割り振られていたバイト数を示します。
<P>
<P>ディスク・キャッシュの場合、
<B>afsd</B> コマンドの <B>-blocks</B> 引き数で、
<B>cacheinfo</B> ファイルの値を上書きします。いずれかの方法で指定された値が、キャッシュ・サイズの絶対上限値を設定します。他の引き数 (たとえば、
<B>-dcache</B>、
<B>-chunksize</B> など) に指定された値は、これより大きなキャッシュになることはありません。
<B>afsd</B> プログラムでは、区画サイズの
95 % よりも大きな値を設定することはできません。その場合には、このプログラムは、標準出力ストリームにエラー・メッセージを出力し、終了します。これは、キャッシュ実装自身には、小さなサイズのディスク・スペースしか必要としないからで、この区画があふれると、クライアント・マシンは暴走します。
<P>
<P>初期化後再起動せずにディスク・キャッシュのサイズを変更する場合には、
<B>fs setcachesize</B> コマンドを使用してください。設定値は、<B>afsd</B> コマンドが次に実行されるか、
<B>fs setcachesize</B> コマンドが再発行されるまで有効です。
<B>fs setcachesize</B> コマンドは、メモリー・キャッシュに対しては実行できません。
</LI><LI>各キャッシュ・<VAR>チャンク</VAR>のサイズを設定します。これは暗黙でキャッシュ・マネージャーがファイル・サーバーから一度に要求するデータ量を設定したことになります (AFS は、部分的なファイル転送を使用するので、RPC の 1 回あたりのフェッチ・サイズになります)。
<P>
<P>ディスク・キャッシュの場合、チャンクは <B>V</B><VAR>n</VAR> ファイルになります。このパラメーターは、各ファイルが拡張可能な最大サイズに設定します。デフォルト値は 64 KB です。メモリー・キャッシュの場合、各チャンクは連続したメモリー・ブロックの集合です。デフォルト・サイズは 8 KB です。
<P>
<P>いずれかのタイプのチャンク・サイズのデフォルト値を上書きするには、
<B>-chunksize</B> 引き数を使用し、2 のべき乗の整数で指定します。詳細は、[<B>オプション</B>] セクションを参照してください。メモリー・キャッシュの場合、キャッシュ・サイズの合計をチャンク・サイズで割り算して余りが生じると、
<B>afsd</B> プログラムは、dcache 項目数を切り捨てます。これによりわずかですがキャッシュ・サイズが小さくなります。
</LI><LI>キャッシュ内のチャンク数を設定します。メモリー・キャッシュの場合、チャンク数はキャッシュ・サイズをチャンク・サイズで割ったものと等しくなります。ディスク・キャッシュの場合、チャンク数 (<B>V</B><VAR>n</VAR> ファイル) は次の値のうち最大になる値に設定されます。ただし、<B>-files</B> 引き数を使ってこの値を明示的に指定した場合は除きます。
<UL>
<LI>100
</LI><LI>キャッシュ・サイズをチャンク・サイズで割った結果の 1.5 倍 (<VAR>cachesize</VAR>/<VAR>chunksize</VAR> * 1.5)
</LI><LI>キャッシュ・サイズを 10 KB で割った結果 (<VAR>cachesize</VAR>/10240)
</LI></UL>
</LI><LI>マシン・メモリーに割り振られる <VAR>dcache 項目</VAR> の数を設定し、キャッシュ内のチャンクに関する情報を保管します。
<P>
<P>ディスク・キャッシュの場合、<B>/usr/vice/cache/CacheItems</B> ファイルに、各 <B>V</B><VAR>n</VAR> ファイルの項目が記述されます。デフォルトでは、アクセスを高速にするために、これらの項目の半分 (2000 以下) が dcache 項目としてマシン・メモリーにコピーされます。
<P>
<P>メモリー・キャッシュの場合、
<B>CacheItems</B> ファイルがないので、キャッシュ・チャンクに関するすべての情報が dcache 項目としてメモリー内になければなりません。このため、メモリー・キャッシュにはデフォルトの dcache 項目数はありません。その代わり、<B>afsd</B> プログラムがキャッシュ・サイズをチャンク・サイズで割り dcache 項目数を算出します。
<P>
<P>dcache 項目数を設定するには、
<B>-dcache</B> 引き数を使用します。この場合、デフォルトで設けられている制限 2,000 を超える値を指定できます。この引き数は、いずれのタイプのキャッシュに対しても、使用することをお勧めしません。ディスク・キャッシュの dcache 項目数を増やすと、パフォーマンスが改善することもありますが (より多くの項目が、ディスクではなくメモリーから取得されるため)、それにも限界があります。メモリー・キャッシュに対してこの引き数を使用する場合には、発行者がチャンク・サイズにこの値を掛けてキャッシュ・サイズを計算しなければなりません。
</LI><LI>マシン・メモリーで使用可能な <VAR>stat</VAR> 項目の数を設定します。この項目には、キャッシュされた AFS ファイルに関する状況情報がキャッシュされます。デフォルト値は 300 です。デフォルト値を変更する場合には、
<B>-stat</B> 引き数を使用してください。
</LI><LI>正確な時間のソースとして、ローカル・セルにあるファイル・サーバー・マシンをランダムに選択します。必要であれば、ファイル・サーバー・マシンのクロックに合わせて、ローカル・クロックが 5 分ごとに調整されます。
<P>
<P><B>afsd</B> コマンドが時間標準を選択しないようにするには、
<B>-nosettime</B> フラグを使用してください。これは、クライアントとしても機能するファイル・サーバー・マシンにのみお勧めします。ファイル・サーバー・マシンは、ネットワーク時刻プロトコル・デーモンを使用して、正確な時刻を維持します。
</LI></UL>
<P>キャッシュ構成パラメーターを設定する以外に、
<B>afsd</B> プログラムは、次のデーモンを開始します。
(多くのシステム・タイプでは、これらのデーモンは、
UNIX の <B>ps</B> コマンドの出力で、名前のない項目として表示されます。)
<UL>
<LI>1 つの<I>コールバック</I> デーモン。これはコールバックを処理します。これは、クライアント・マシンの作動状態を検査するために、ファイル・サーバーが定期的に送信するプローブにも応答します。
</LI><LI>1 つの<I>保守</I> デーモン。これは次のタスクを実行します。
<UL>
<LI>カーネル・メモリーから、不要なデータ (有効期限が切れたトークンなど) のガーベッジ回収を行う
</LI><LI>ファイルを同期する
</LI><LI>読み取り専用ボリュームからの情報を、1 時間に 1 回リフレッシュする
</LI><LI>マシンが NFS/AFS 変換プログラムを実行している場合に、
NFS クライアントに対する遅延書き込みを行う
</LI></UL>
</LI><LI>1 つの<I>キャッシュ切り捨て</I> デーモン。これは、空きスペースが必要になると、キャッシュ・データと状況情報をファイル・サーバーに書き込むことにより、キャッシュをフラッシュします。
</LI><LI>1 つの<I>サーバー接続</I> デーモン。これは、数分ごとにファイル・サーバーを調べ、アクセス可能化検査します。またこのデーモンは、<B>-nosettime</B> フラグが使用されていなければ、マシンのクロックと、ランダムに選んだファイル・サーバー・マシンのクロックとの間の同期を取ります。常に 1 つのサーバー接続デーモンが存在しています。
</LI><LI>複数の<I>バックグラウンド</I>・デーモン。このデーモンは、ファイルを事前に取り出し、
AFS に保管データをバックグラウンドで (遅延) 書き込みを行うことにより、パフォーマンスを改善します。
<P>
<P>バックグラウンド・デーモンのデフォルト数は 2 ですが、
1 つのマシンで同時に少なくても 5 つまでのユーザーを処理することができます。この数値を大きくするには、<B>-daemons</B> 引き数を使用します。
6 よりも大きな値に設定する必要は、通常ありません。
</LI><LI>1 つの <I>Rx listener</I> デーモン (システムによって異なります)。これは、着信 RPC を listen します。
</LI><LI>1 つの<I>Rx イベント</I>・デーモン (システムによって異なります)。これは、RX システムにおけるタスクの待ち行列を検討し、必要に応じて実行します。待ち行列のほとんどの項目は、障害の発生したパケットの再送信によるものです。
</LI><LI>仮想メモリー (VM) を組み込んだ AIX を実行しているマシンでは、
1 つ以上の <I>VM</I> デーモン (<I>入出力</I> デーモンと呼ばれることもあります)。これは、ディスク・メモリーとマシン・メモリーの間でデータ転送を行います。このデーモンの数は、
<B>-biods</B> および <B>-daemons</B> 引き数によって異なります。
<UL>
<LI><B>-biods</B> 引き数が使用されている場合は、
VM デーモンの数を設定します。
</LI><LI><B>-daemons</B> 引き数だけが指定されている場合は、
VM デーモンの数は、バックグラウンド・デーモンの 2 倍になります。
</LI><LI>どちらの引き数も指定されていない場合は、VM デーモンの数は 5 です。
</LI></UL>
</LI></UL>
<P><STRONG>注意</STRONG>
<P><B>-shutdown</B> パラメーターは使用しないでください。このパラメーターを使ってキャッシュ・マネージャーを終了しても、あまり効果はありません。その代わりに、UNIX の標準の <B>umount</B> コマンドを使用して、
AFS ルート・ディレクトリー (標準では、<B>/afs</B>) をアンマウントし、キャッシュ・マネージャーを停止してください。その後マシンをリブートして、キャッシュ・マネージャーを再度初期化する必要があります。
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B>-blocks
</B><DD>マシンのキャッシュ・ディレクトリー (ディスク・キャッシュの場合) またはメモリー (メモリー・キャッシュの場合)で使用可能な KB ブロックの数を指定します。これにより、<B>/usr/vice/etc/cacheinfo</B> ファイルの 3 番目のフィールドにあるデフォルト定義は上書きされます。ディスク・キャッシュの場合、この値は、キャッシュ区画で使用可能なスペースの 95% を超えることはできません。メモリー・キャッシュを使用する場合は、この引き数と <B>-dcache</B> 引き数とを一緒に使用しないでください。一緒に使用すると、チャンク・サイズが 2 のべき乗にならなくなることもあります。
<P><DT><B>-files
</B><DD>ディスク・キャッシュをキャッシュ・ディレクトリーに作成するために、
<B>V</B><VAR>n</VAR> ファイルの数を指定して、
<B>記述</B>セクションの説明にしたがって計算されたデフォルト値を上書きします。各 <B>V</B><VAR>n</VAR> は、データのチャンクを格納し、デフォルトの最大サイズの 64 KB まで大きくなることがあります。この引き数は、<B>-memcache</B> 引き数と一緒に使用してはなりません。
<P><DT><B>-rootvol
</B><DD>AFS ファイル・ツリーのルート・ディレクトリー (通常、
<B>/afs</B> ディレクトリー) に対応する読み取り / 書き込みボリュームに名前を付けます。この値は、<B>root.afs</B> ボリュームのデフォルト値を上書きします。
<P><DT><B>-stat
</B><DD>マシンのメモリーに割り振る、キャッシュにある AFS ファイルに関する状況情報を記録するための項目の数を指定します。この値は、デフォルト (300) を上書きします。
<P><DT><B>-memcache
</B><DD>ディスク・キャッシュではなく、メモリー・キャッシュを初期化します。このフラグは、<B>-files</B> 引き数と一緒に使用してはなりません。
<P><DT><B>-cachedir
</B><DD>キャッシュとして使用されるローカル・ディスク・ディレクトリーを指定します。この値は、<B>/usr/vice/etc/cacheinfo</B> ファイルの 2 番目のフィールドで定義されているデフォルト値を上書きします。
<P><DT><B>-mountdir
</B><DD>AFS ファイル・スペースのルートにマウントするローカル・ディスク・ディレクトリーを指定します。この値は、<B>/usr/vice/etc/cacheinfo</B> ファイルの最初のフィールドで定義されているデフォルト値を上書きします。
<B>/afs</B> ディレクトリーが使用されていないと、マシンは、その値を使用するセルのファイル・スペースにアクセスできません。
<P><DT><B>-daemons
</B><DD>マシンで実行するバックグラウンド・デーモンの数を指定します。これらデーモンは、保管データの事前取り出しおよびバックグラウンド書き込みを行うことにより、パフォーマンスを向上させます。この値はデフォルトの 2 を上書きします。デフォルトは、
1 つのマシンを 5 ユーザーが使用している場合に適切な値です。
<B>6</B> よりも大きな値を指定しても、通常は <B>6</B> の場合よりもパフォーマンスがあがることはありません。
<P>
<P><B>注:</B> 仮想メモリー (VM) を組み込んだ AIX マシンでは、
VM デーモンの数は、この引き数が指定され、<B>-biods</B> 引き数が指定されていない場合には、この引き数の 2 倍に設定されます。どちらの引き数も指定されていない場合は、VM デーモンの数は 5 です。
<P><DT><B>-nosettime
</B><DD>5 分ごとにサーバー・マシン上でクロックをチェックし、キャッシュ・マネージャーのクロックと、ランダムに選択されたサーバー・マシンのクロックが、キャッシュ・マネージャーによって同期しないようにします。すでに他の時間同期プロトコルが使用されているマシン上でのみ、このフラグを使用します (たとえば、<B>runntp</B> 処理が実行されるサーバー・マシン)。
<P><DT><B>-verbose
</B><DD>標準出力ストリーム上に <B>afsd</B> プログラムのアクションの詳細なトレースを生成します。
<P><DT><B>-rmtsys
</B><DD>NFS クライアント・マシンに代わって AFS で指定されるシステム・コールを実行する追加デーモンを初期化します。このフラグは、マシンが AFS コマンドを実行する NFS クライアント・マシンのユーザーに NFS/AFS 変換プログラム・ユーザーを提供している場合にのみ使用します。
<A NAME="IDX4192"></A>
<P><DT><B>-debug
</B><DD>標準出力ストリーム上に <B>afsd</B> プログラムのアクションの非常に詳細なトレースを生成します。この情報は、大部分はデバッグ目的のために役立ちます。
<P><DT><B>-chunksize
</B><DD>各キャッシュ・チャンクのサイズを設定します。設定された整数は、
<B>0</B> 〜 <B>30</B> までの範囲内になければならず、
2 のべき乗で使用されます。この値は、ディスク・キャッシュの場合は、デフォルト値 16 (2<SUP>16</SUP> は 64 KB になります) を上書きし、メモリー・キャッシュの場合は 13 (2<SUP>13</SUP> は 8 KB になります) を上書きします。値が <B>0</B> 以下または <B>30</B> より大きい場合、適切なデフォルト値をチャンク・サイズに設定します。
<B>10</B> 未満の値 (10 の場合のチャンク・サイズは 1 KB になります) は、お勧めしません。発行者がキャッシュ・サイズを計算しなければならないので、この引き数と <B>-dcache</B> 引き数を一緒に使用することはお勧めできません。
<P><DT><B>-dcache
</B><DD>メモリー内の dcache 項目の数を設定します。この値は、キャッシュ・チャンクに関する情報を保管するために使用されます。ディスク・キャッシュの場合、これによってデフォルト値が上書きされます。このデフォルト値は <B>V</B><VAR>n</VAR> ファイルの数の半分です (キャッシュ・チャンク)。メモリー・キャッシュの場合、この引き数はキャッシュのチャンク数を効率よく設定します。ただし、それには発行者が最終的なキャッシュ・サイズ (これはチャンク・サイズとこの値を掛けた結果になります) を計算しなければならないので、この引き数を使用することはお勧めできません。この引き数と <B>-blocks</B> 引き数は、一緒に使用しないでください。一緒に使用すると、チャンク・サイズが 2 のべき乗にならなくなることがあります。
<P><DT><B>-volumes
</B><DD>ボリュームの場所情報を保管するために割り当てられる、メモリー構造の数を指定します。デフォルト値は 50 です。
<P><DT><B>-biods
</B><DD>仮想メモリー (VM) を搭載した AIX バージョンが稼働しているマシンの入出力操作専用の VM デーモンの数を指定します。この引き数と<B>-daemons</B> 引き数がどちらも指定されていない場合は、デフォルト値 5 が想定されます。この引き数が指定されていなくて、
<B>-daemons</B> 引き数が指定されている場合は、
VM デーモンの数は、<B>-daemons</B> 引き数の値の 2 倍に設定されます。
<P>
<TABLE><TR><TD ALIGN="LEFT" VALIGN="TOP"><B>注:</B></TD><TD ALIGN="LEFT" VALIGN="TOP">この引き数は、VM を搭載した AIX が稼働しているマシンで使用してください。
</TD></TR></TABLE>
<P><DT><B>-prealloc
</B><DD>キャッシュ・マネージャーが内部で使用するために事前に割り振られるメモリー数を指定します。デフォルトの初期値は 400 です。ただし、キャッシュ・マネージャーは、必要に応じて、動的にメモリー割り振りを増やします。
<P><DT><B>-confdir
</B><DD><B>cacheinfo</B>、
<B> ThisCell</B>、および <B>CellServDB</B> 構成ファイルの取得先の <B>/usr/vice/etc</B> ディレクトリー以外のディレクトリーを指定します。
<P><DT><B>-logfile
</B><DD>廃止されています。指定しても何も起こりません。キャッシュ・マネージャーが生成しなくなったトレースのタイプを記録するための代替えファイルを指定します。デフォルト値は、<B>/usr/vice/etc/AFSLog</B> です。
<P><DT><B>-waitclose
</B><DD>キャッシュ・マネージャーのオペレーション結果を保持しません。キャッシュ・マネージャーの以前のバージョンではこれによってファイル・サーバーへの同期書き込み動作が影響を受けていましたが、現バージョンではデフォルトの動作になっています。非同期書き込みを行う場合には、
<B>fs storebehind</B> コマンドを使用します。
<P><DT><B>-shutdown
</B><DD>キャッシュ・マネージャーを停止します。ただし、効果的な方法とはいえません。このフラグは使用しないでください。
<P><DT><B>-enable_peer_stats
</B><DD>Rx 統計集合を活動化し、それらを保管するためのメモリーを割り振ります。別のマシンの特定の UDP ポートとの接続ごとに、送信または受信された RPC の各タイプ (FetchFile、
GetStatus など) のレコードが別々に保持されています。レコードを表示したり、ほかの方法でレコードにアクセスするには、
Rx Monitoring API を使用します。
<P><DT><B>-enable_process_stats
</B><DD>Rx 統計集合を活動化し、それらを保管するためのメモリーを割り振ります。送信または受信された RPC の各タイプ (FetchFile、GetStatus など) ごとに、レコードが別々に保持され、別のマシンへのすべての接続が集計されます。レコードを表示したり、ほかの方法でレコードにアクセスするには、
Rx Monitoring API を使用します。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>例</STRONG>
<P><B>afsd</B> コマンドは通常、コマンド・シェル・プロンプトで入力されるのではなく、マシンの AFS 初期化ファイルに組み込まれます。最大ディスク・キャッシュのための適切な形式です。
<PRE>   /usr/vice/etc/afsd
   
</PRE>
<P>以下のコマンドは、5 ユーザー以上に応対する NFS/AFS 変換プログラム・マシンのように振る舞うマシンが使用可能な時に適切です。
<PRE>   /usr/vice/etc/afsd -daemons 4 -rmtsys
   
</PRE>
<P>以下のコマンドは、メモリー・キャッシュを初期化し、チャンクのサイズに 16 KB (2<SUP>14</SUP>) を設定します。
<PRE>   /usr/vice/etc/afsd -memcache -chunksize 14
   
</PRE>
<P><STRONG>必要となる特権</STRONG>
<P>コマンドの発行者は、ローカル・スーパーユーザー <B>root</B> としてログインする必要があります。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf017.htm#HDRCACHEITEMS">CacheItems</A>
<P><A HREF="auarf019.htm#HDRCLI_CSDB">CellServDB (クライアント・バージョン)</A>
<P><A HREF="auarf032.htm#HDRCLI_THISCELL">ThisCell (クライアント・バージョン)</A>
<P><A HREF="auarf036.htm#HDRVN">V<I>n</I></A>
<P><A HREF="auarf043.htm#HDRCACHEINFO">cacheinfo</A>
<A NAME="IDX4193"></A>
<A NAME="IDX4194"></A>
<A NAME="IDX4195"></A>
<A NAME="IDX4196"></A>
<A NAME="IDX4197"></A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf057.htm">前ページ</A> &#124; <A HREF="auarf059.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
