<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRBK_ADDVOLENTRY" HREF="auarf002.htm#ToC_77">backup addvolentry</A></H2>
<A NAME="IDX4239"></A>
<A NAME="IDX4240"></A>
<A NAME="IDX4241"></A>
<A NAME="IDX4242"></A>
<A NAME="IDX4243"></A>
<A NAME="IDX4244"></A>
<A NAME="IDX4245"></A>
<A NAME="IDX4246"></A>
<A NAME="IDX4247"></A>
<A NAME="IDX4248"></A>
<A NAME="IDX4249"></A>
<A NAME="IDX4250"></A>
<A NAME="IDX4251"></A>
<A NAME="IDX4252"></A>
<P><STRONG>目的</STRONG>
<P>ボリューム・セットにボリューム項目を定義します。
<P><STRONG>構文</STRONG>
<PRE><B>backup addvolentry -name</B> &lt;<VAR>volume set name</VAR>>  <B>-server</B> &lt;<VAR>machine name</VAR>>
                   <B>-partition</B> &lt;<VAR>partition name</VAR>> 
                   <B>-volumes</B> &lt;<VAR>volume name (regular expression)</VAR>>   
                   [<B>-localauth</B>]  [<B>-cell</B> &lt;<VAR>cell name</VAR>>]  [<B>-help</B>]
   
<B>backup addvole -n</B> &lt;<VAR>volume set name</VAR>>  <B>-s</B> &lt;<VAR>machine name</VAR>> <B>-p</B> &lt;<VAR>partition name</VAR>>
               <B>-v</B> &lt;<VAR>volume name (regular expression)</VAR>>
               [<B>-l</B>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]  [<B>-h</B>]
</PRE>
<P><STRONG>構文</STRONG>
<P><B>backup addvolentry</B> コマンドは、
<B>-name</B> 引き数に指定された既存のボリューム・セットに、ボリューム項目定義を追加します。
<B>-server</B>, <B>-partition</B>、および <B>-volumes</B> 引き数の組み合わせによっては、
1 つのボリューム項目定義を複数のボリュームに一致させることができます。
<P><B>-server</B> および <B>-partition</B> 引き数には、次の値を指定します。
<UL>
<LI>1 つのマシンまたは区画の名前
</LI><LI>ボリューム・ロケーション・データベース (VLDB) 内の各マシン名または区画名に一致する、メタキャラクター式 <B>.*</B> (ピリオドとアスタリスク)。
</LI></UL>
<P><B>-volumes</B> 引き数には、英数字といくつかのメタ文字を組み合わせて指定し、ボリューム名の一部またはすべてをワイルドカードで表現します。使用可能なメタ文字については、<B>オプション</B>セクションを参照してください。
<P><STRONG>注意</STRONG>
<P>このコマンドは、対話モードで発行してください。このコマンドをシェル・プロンプトで発行する場合には、メタ文字を含む文字列を二重引用符で囲むか、メタ文字を他の区切りでエスケープして、これらの文字がシェルに解釈されないようにしてください。一時ボリューム・セットへのボリューム項目の追加は、ボリューム・セットが作成された対話式セッション内でのみ行うことができます。
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B>-name
</B><DD>ボリューム項目定義を追加するボリューム・セットの名前を指定します。このボリューム・セットはすでに存在していなければなりません。
(ボリューム・セットを作成する場合には、
<B>backup addvolset</B> コマンドを使用してください。)
<P><DT><B>-server
</B><DD>ボリューム項目のボリュームを格納する 1 つ以上のファイル・サーバー・セットを定義します。完全修飾のホスト名 (たとえば <B>fs1.abc.com</B>) を指定するか、メタ文字式 <B>.*</B> (ピリオドとアスタリスク ) を使用してください。この式は、VLDB にあるすべてのマシン名に一致します。
<P><DT><B>-partition
</B><DD>ボリューム項目のボリュームを格納する 1 つ以上の区画セットを定義します。完全修飾の区画名 (たとえば <B>/vicepa</B>) を指定するか、メタ文字式 <B>.*</B> (ピリオドとアスタリスク ) を使用してください。この式は、すべての区画名に一致します。
<P><DT><B>-volumes
</B><DD>ボリューム項目に含まれる 1 つ以上のボリュームを定義します。ボリューム名で指定することも、正規の英数字と次のメタ文字式のいくつかを組み合わせて指定することもできます。
<A NAME="IDX4253"></A>
<A NAME="IDX4254"></A>
<P>
<P>
<DL>
<P><DT><B>.
</B><DD>ピリオドは、単一文字に一致します。
<P><DT><B>*
</B><DD>アスタリスクは、直前の文字の 0 回以上の繰り返しに一致します。これは、他の英数字またはメタ文字を組み合わせて使用することができます。
<P><DT><B>[ ]
</B><DD>文字のリストを大括弧で囲むと、そのいずれかの 1 文字に一致します。たとえば、<B>[abc]</B> は、<B>a</B> 、
<B>b</B>、<B>c</B> のいずれか 1 文字に一致し、
<B>d</B> や <B>A</B> には一致しません。この式では、アスタリスクを使用することができます。
<P><DT><B>^
</B><DD>大括弧のセットの先頭文字として脱字記号を使用すると、この記号の直後の文字を <I>除く</I>、任意の一文字に一致します。たとえば、<B>[^a]</B> は、
<B>a</B> の小文字以外の任意の一文字に一致します。この式では、アスタリスクを使用することができます。
<P><DT><B>\
</B><DD>このリストでメタ文字の直前に円記号を付けると、そのメタ文字自身に一致します。たとえば、式 <B>\.</B>。
(円記号とピリオド) は、ピリオド 1 つに一致し、
<B>\*</B> は、アスタリスク 1 つ、<B>\\</B> は円記号 1 つにそれぞれ一致します。このような式はアスタリスクと一緒に使用することができます (たとえば、
<B>\.*</B> は、任意の数のピリオドに一致します)。
</DL>
<P>
<P>
<P>最も一般的なメタ文字式は、ピリオドの後にアスタリスクが続く式 (<B>.*</B>) です。ピリオドは任意の一文字に一致し、アスタリスクは直前の文字の任意の繰り返しに一致するので、この式は、任意の長さの文字列に一致します。ただし、メタ文字式が使用できるのは、
<B>-server</B> 引き数と <B>-partition</B> 引き数だけです。ボリューム定義では、これらの文字は単独で使用するか (この場合、
VLDB にリストされている任意のボリュームに一致します)、あるいは通常の文字と一緒に使用することができます。次の例は、<B>user</B> で始まり、
<B>backup</B> で終了する任意のボリューム名に一致します。
<P>
<PRE>   <B>user.*backup</B>
   
</PRE>
<P><DT><B>-localauth
</B><DD>ローカルの <B>/usr/afs/etc/KeyFile</B> ファイルのキーを使用して、サーバー・チケットを構成します。相互認証の間、
<B>backup</B> コマンド・インタープリターは、バックアップ・サーバー、ボリューム・サーバーおよび VL サーバーにこのチケットを提供します。このフラグは、<B>-cell</B> 引き数と一緒に使用してはなりません。詳細については、<B>backup</B> の解説ページを参照してください。
<P><DT><B>-cell
</B><DD>コマンドを実行するセルを指定します。この引き数は、
<B>-localauth</B> フラグと一緒に使用してはなりません。詳細については、<B>backup</B> の解説ページを参照してください。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>例</STRONG>
<P>次のコマンドは、<B>sys</B> という名前のボリューム・セットにボリューム項目を追加しています。この項目は、<B>sun4x_56</B> という文字列で始まり、ピリオドが続く名前を持っているマシンまたは区画上のすべてのボリュームに一致します。
<PRE>   backup> <B>addvolentry sys .* .* sun4x_56\..*</B>
   
</PRE>
<P>ファイル・サーバー・マシン <B>fs2.abc.com</B> の <B>/vicepb</B> 区画上のすべてのボリュームに一致するように、次のコマンドは、<B>fs2</B> という名前のボリューム・セットにボリューム項目を追加しています。これはシェル・プロンプトで発行されているので、
<B>-volumes</B> 引き数のメタ文字が二重引用符で囲まれています。
(ここで示したコマンドは、読みやすくするために 2 行で表示されています。)
<PRE>   % <B>backup addvolentry -name fs2 -server fs2.abc.com \
                        -partition /vicepb -volumes ".*"</B>
   
</PRE>
<P><I>AFS 管理の手引き</I> の AFS バックアップ・システムの構成に関する章にはこれに関する例と、ボリュームのグループ化に関するアドバイスが解説されています。
<P><STRONG>必要となる特権</STRONG>
<P>コマンドの発行者は、バックアップ・サーバーが実行されているすべてのマシン上の <B>/usr/afs/etc/UserList</B> ファイルにリストされていなければなりません。また、<B>-localauth</B> フラグを使用する場合は、ローカル・スーパーユーザー <B>root</B> としてサーバー・マシンにログオンする必要があります。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf060.htm#HDRBK_INTRO">backup</A>
<P><A HREF="auarf064.htm#HDRBK_ADDVOLSET">backup addvolset</A>
<P><A HREF="auarf070.htm#HDRBK_DELVOLENTRY">backup delvolentry</A>
<P><A HREF="auarf071.htm#HDRBK_DELVOLSET">backup delvolset</A>
<P><A HREF="auarf082.htm#HDRBK_LISTVOLSETS">backup listvolsets</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf062.htm">前ページ</A> &#124; <A HREF="auarf064.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
