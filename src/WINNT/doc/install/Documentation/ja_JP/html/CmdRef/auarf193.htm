<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRKAS_SETFIELDS" HREF="auarf002.htm#ToC_207">kas setfields</A></H2>
<A NAME="IDX5130"></A>
<A NAME="IDX5131"></A>
<A NAME="IDX5132"></A>
<A NAME="IDX5133"></A>
<A NAME="IDX5134"></A>
<A NAME="IDX5135"></A>
<A NAME="IDX5136"></A>
<A NAME="IDX5137"></A>
<A NAME="IDX5138"></A>
<A NAME="IDX5139"></A>
<A NAME="IDX5140"></A>
<A NAME="IDX5141"></A>
<A NAME="IDX5142"></A>
<P><STRONG>目的</STRONG>
<P>認証データベース項目のオプションの特性を設定します。
<P><STRONG>構文</STRONG>
<PRE><B>kas setfields -name</B> &lt;<VAR>name of user</VAR>>
              [<B>-flags</B> &lt;<VAR>hex flag value or flag name expression</VAR>>]
              [<B>-expiration</B> &lt;<VAR>date of account expiration</VAR>>]
              [<B>-lifetime</B> &lt;<VAR>maximum ticket lifetime</VAR>>]
              [<B>-pwexpires</B> &lt;<VAR>number days password is valid ([0..254])</VAR>>]
              [<B>-reuse</B> &lt;<VAR>permit password reuse (yes/no)</VAR>>]
              [<B>-attempts</B> &lt;<VAR>maximum successive failed login tries ([0..254])</VAR>>]
              [<B>-locktime</B> &lt;<VAR>failure penalty [hh:mm or minutes]</VAR>>]
              [<B>-admin_username</B> &lt;<VAR>admin principal to use for authentication</VAR>>]
              [<B>-password_for_admin</B> &lt;<VAR>admin password</VAR>>]  [<B>-cell</B> &lt;<VAR>cell name</VAR>>]
              [<B>-servers</B> &lt;<VAR>0explicit list of authentication servers</VAR>><SUP>+</SUP>]
              [<B>-noauth</B>]  [<B>-help</B>]
   
<B>kas setf -na</B> &lt;<VAR>name of user</VAR>>  [<B>-f</B> &lt;<VAR>hex flag value or flag name expression</VAR>>]
         [<B>-e</B> &lt;<VAR>date of account expiration</VAR>>]  [<B>-li</B> &lt;<VAR>maximum ticket lifetime</VAR>>]
         [<B>-pw</B> &lt;<VAR>number days password is valid ([0..254])</VAR>>]
         [<B>-r</B> &lt;<VAR>permit password reuse (yes/no)</VAR>>]
         [<B>-at</B> &lt;<VAR>maximum successive failed login tries ([0..254])</VAR>>]
         [<B>-lo</B> &lt;<VAR>failure penalty [hh:mm or minutes]</VAR>>]
         [<B>-ad</B> &lt;<VAR>admin principal to use for authentication</VAR>>]
         [<B>-pa</B> &lt;<VAR>admin password</VAR>>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]
         [<B>-s</B> &lt;<VAR>explicit list of authentication servers</VAR>><SUP>+</SUP>]  [<B>-no</B>]  [<B>-h</B>]
   
<B>kas sf -na</B> &lt;<VAR>name of user</VAR>>  [<B>-f</B> &lt;<VAR>hex flag value or flag name expression</VAR>>]
       [<B>-e</B> &lt;<VAR>date of account expiration</VAR>>]  [<B>-li</B> &lt;<VAR>maximum ticket lifetime</VAR>>]
       [<B>-pw</B> &lt;<VAR>number days password is valid ([0..254])</VAR>>]
       [<B>-r</B> &lt;<VAR>permit password reuse (yes/no)</VAR>>]
       [<B>-at</B> &lt;<VAR>maximum successive failed login tries ([0..254])</VAR>>]
       [<B>-lo</B> &lt;<VAR>failure penalty [hh:mm or minutes]</VAR>>]
       [<B>-ad</B> &lt;<VAR>admin principal to use for authentication</VAR>>]
       [<B>-pa</B> &lt;<VAR>admin password</VAR>>]  [<B>-c</B> &lt;<VAR>cell name</VAR>>]
       [<B>-s</B> &lt;<VAR>explicit list of authentication servers</VAR>><SUP>+</SUP>]  [<B>-no</B>]  [<B>-h</B>]
</PRE>
<P><STRONG>構文</STRONG>
<P><B>kas setfields</B> コマンドは、
<B>-name</B> 引き数で指定されたユーザーの認証データベース項目を、指定されたオプション引き数に応じて変更します。この引き数は、単独で指定することも、組み合わせて指定することもできます。
<UL>
<LI>ユーザーが認証サーバーに対して管理特権があり、チケットを入手して、自分のパスワードを変更できるかどうかを判別するフラグを設定するには、<B>-flags</B> 引き数を使用してください。
</LI><LI>認証データベースの項目の有効期限を設定するには、
<B>-expiration</B> 引き数を指定してください。
</LI><LI>項目に関連したチケットの最大存続時間を設定するには、
<B>-lifetime</B> 引き数を指定してください。この値と他の値からトークンの実際の存続時間を判別する方法については、
<B>klog</B> コマンドの解説ページを参照してください。
</LI><LI>ユーザーのパスワード失効時間を設定するには、
<B>-pwexpires</B> 引き数指定してください。
</LI><LI>新規パスワードの作成時に、前回使用した20 個のパスワードから選択して再利用するかどうか設定するには、
<B>-reuse</B> 引き数を指定してください。
</LI><LI>ユーザーが無効なパスワードを入力できる最大試行回数を設定する場合には、<B>-attempts</B> 引き数を指定します。この回数を超えると、認証サーバーは入力を拒否し、発行者をロックアウトします。6 回失敗した後に、認証サーバーは、
UNIX システム・ログ・ファイル (<B>syslog</B> ファイルまたは同様なファイル) にメッセージを記録します。このファイルの標準的な位置は、オペレーティング・システムによって異なります。
</LI><LI>ロックアウトされたユーザーの認証を認証サーバーが拒否している時間を設定するには、<B>-locktime</B> 引き数を設定してください。
</LI></UL>
<P><B>kas examine</B> コマンドは、このコマンドで行った設定を表示します。
<P><STRONG>注意</STRONG>
<P><B>-pwexpires</B> 引き数で設定したパスワード存続時間は、このコマンドが発行されたときからではなく、ユーザーのパスワードを最後に変更した時刻から始まります。したがって、存続時間はそ及的になります。たとえば、ユーザーが 100 日前にパスワードを変更して、パスワード存続時間の設定が 100 日未満の場合、パスワードは即時に有効期限が切れます。有効期限をさかのぼるのを回避するには、パスワード存続時間の切れる直前にパスワードを変更するように、ユーザーに指示してください。
<P>認証アカウントに <TT>ADMIN</TT> フラグが設定されている管理者は、認証データベース内の機密性の高い情報にアクセスすることができます。非許可ユーザーによるアクセスを防ぐには、
<B>-attempts</B> 引き数を使用して、管理トークンを取得しているユーザーに対して、無効なパスワードの入力回数を厳密に制限する必要があります。しかし、セルの中には、<TT>ADMIN</TT> フラグの付いたアカウントが複数存在していなければなりません。<B>kas</B> コマンド自身も <TT>ADMIN</TT> 特権を必要としますし、管理者がロックアウトされた場合、他の <TT>ADMIN</TT> 特権を持つアカウントにアクセスして、現在のアカウントのロックを解除してもらう必要があります。
<P>ある状況では、認証の失敗回数を強制的に適用すると、
<B>-attempts</B> 引き数で設定された限界よりも少ない場合でも、ロックアウトが起きてしまう場合があります。
<B>klog</B>、AFS 修正 login ユーティリティーなどのクライアント・サイド認証プログラムは、認証要求を受け取ると、ランダムに認証サーバーを選択し、そのサーバーで認証されない場合には、次の要求で別の認証サーバーを選択するようになっています。異なるデータベース・サーバー・マシンで実行されている認証サーバーは、ユーザーが無効なパスワードを入力した回数についての情報を共有していません。その代わりに、各認証サーバーは、補助データベース・ファイル
<B>kaserverauxdb</B> (デフォルトでは、
<B>/usr/afs/local</B> ディレクトリーにあります ) のコピーを個別に保守しています。このファイルには、ユーザー・アカウントごとに、連続失敗回数と最後に失敗した時刻が記録されています。これは、どの認証サーバーも、失敗試行回数の総数ではなく、その一部について知っていることを意味します。<B>-attempts</B> 引き数で設定された回数以上の試行を許可しないようにするには、各認証サーバーが試行回数の一部だけを認識するようにしなければなりません。特に、試行回数の制限が <I>f</I> で、認証サーバーの数が <I>S</I> の場合、各認証サーバーは、<I>f</I> を <I>S</I> で割った数に等しい試行回数を許可することができます
(認証サーバーの Ubik 同期サイトは、残りの <I>fmodS</I> をトラックします)。
<P>通常、この方法によって、許可される試行回数が構成された制限
(<I>f</I>) より少なくなることはありません。
1 つの認証サーバーが試行を拒否すると、クライアントは別のサーバー・インスタンスにアクセスし、認証が成功するか、あるいはすべてのサーバーにアクセスするまで、この操作を繰り返します。しかし、
1 つ以上の認証サーバー・プロセスが使用不能になっている場合、
<I>U</I> を使用不能なサーバー数、
<I>S</I> を通常使用可能なサーバー数とすると、
<I>U</I> を <I>S</I> で割った数に等しいパーセンテージだけ実際には制限回数が少なくなります。
<P>失敗した認証試行に対して、望ましくない結果を避けるためには、次の推奨事項に注意してください。
<UL>
<LI><B>-attempts</B> 引き数 (失敗した認証試行回数の制限) に低すぎる値を設定をしないでください。
3 つのデータベース・サーバー・マシンがあるセルの認証サーバーごとに 3 回まで試行を繰り返すことができるように、通常ユーザー・アカウントの失敗試行回数は 9 回に制限するようにしてください。
</LI><LI><B>-locktime</B> 引き数を使用する場合には、比較的短いロックアウト時間を設定してください。パスワードの推測は常とう手段ですが、これは決して精巧なものではありません。ロックアウト回数を設定することにより、攻撃者の進入を防いだり、また、長期的に見た場合、攻撃者よりも認証ユーザーに対する負担を多くするすることができます。通常のユーザー・アカウントでは、25 分のロックアウト時間が一般的です。
</LI><LI>特に指定のない限り、アカウントに不明瞭なロックアウト時間を割り当てないでください。(<B>-locktime</B> 引き数で
<B>0</B> [zero] を設定しないでください。) このようなアカウントは、ある時点でかなり大きくなる可能性があります。それぞれの認証サーバーは、<B>kaauxdb</B> ファイルのコピーにあるアカウントの障害カウンターをリセットしません。(逆に、ロックアウト時間が限定されていると、認証サーバーに対する試行が最後に失敗して一定の時間が経過すると、カウンターがリセットされます。) また、不明確なロックアウト時間が設定されたアカウントがロックされた場合、管理者が <B>kas unlock</B> コマンドを発行しないと、そのロックは解除できません。したがって、管理アカウントに不明確なロックアウト時間を設定するのは、非常に危険なことです。すべての管理アカウントがロックされると、認証サーバーのすべてのインスタンスを停止し、それぞれの
<B>kaauxdb</B> ファイルを削除しない限り、ロックを解除することはできません。
</LI></UL>
<P><STRONG>オプション </STRONG>
<DL>
<P><DT><B>-name
</B><DD>設定を変更する認証データベース・アカウントを指定します。
<P><DT><B>-flags
</B><DD>4 つの切り替えフラグの 1 つを設定し、そのフラグを現在設定されているフラグに追加します。後に続く文字列を 1 つ以上指定するか、または特定の値を組み合わせた 16 進数を指定します。4 つのフラグをすべてデフォルトに戻すには、値 <B>0</B>
(ゼロ) を指定してください。文字列を使用して 1 度に 1 つ以上のフラグを設定する場合には、これらのフラグを正符号でつないでください (例: <B>NOTGS+ADMIN+CPW</B>)。現在のフラグ設定をすべて消去し、新しい値を設定する場合には、リストの先頭に等号を付けてください (例: <B>=NOTGS+ADMIN+CPW</B>)。
<P>
<DL>
<P><DT><B>ADMIN
</B><DD>ユーザーに特権 <B>kas</B>コマンド (等価の16 進数 <B>0x004</B>、デフォルトは <B>NOADMIN</B>) の発行を許可します。
<A NAME="IDX5143"></A>
<P><DT><B>NOTGS
</B><DD>認証サーバーのチケット獲得サービス (TGS) は、ユーザーへのチケット発行を拒否します
(等価の 16 進数は <B>0x008</B>、デフォルトは <B>TGS</B> です)。
<A NAME="IDX5144"></A>
<P><DT><B>NOSEAL
</B><DD>チケット獲得サービスは、この項目のキー・フィールドの内容を暗号化キーとして使用できません
(等価の 16 進数は <B>0x020</B>、デフォルトは <B>SEAL</B> です)。
<A NAME="IDX5145"></A>
<P><DT><B>NOCPW
</B><DD>ユーザーは、自分のパスワードまたはキーを変更することはできません
(等価の 16 進数は <B>0x040</B>、デフォルトは <B>CPW</B> です)。
<A NAME="IDX5146"></A>
</DL>
<P><DT><B>-expiration
</B><DD>項目そのものの有効期限切れを判別します。ユーザー項目の期限が切れると、ユーザーはログインできなくなります。
<B>afs</B> などのサーバーの期限が切れると、関連した鍵を使用するすべてのサーバー・プロセスがアクセス不能になります。指定可能な値は 次の 3 つです。この中の
1 つを指定します。
<P>
<DL>
<P><DT><B>never
</B><DD>アカウントを無期限にします (デフォルト値)。
<P><DT><B><VAR>mm/dd/yyyy</VAR>
</B><DD>有効期限に指示された日付 (月 / 日 / 年) の午前 12:00 を設定します。例 : <B>01/23/1999</B>, <B>10/07/2000</B>
<P><DT><B>"<VAR>mm/dd/yyyy hh:MM</VAR>"
</B><DD>有効期限に指示された日付 (月 / 日 / 年) の指示された時刻 (時 :
分)を設定します。24 時間形式で時刻を指定します (たとえば、
<B>20:30</B> は、午後 8:30 になります)。日付の形式は、日付のみの場合と同じです。スペースを含むため、インスタンス全体を引用符で囲みます。例 : <B>"01/23/1999 22:30"</B>, <B>"10/07/2000 3:45"</B>
</DL>
<P>
<P>
<P>年の許容値の範囲は、<B>1970</B> (1970 年 1 月 1 日は、標準 UNIX 日付表示で時間 0 になります) から
<B>2037</B> (2037年は、UNIX 表示が 2038 年 2 月以降の日付を収容できないため最大になります) です。
<P><DT><B>-lifetime
</B><DD>認証サーバーのチケット獲得サービス (TGS) がチケットへ割り当て可能な最大存続時間を指定します。アカウントがユーザーに所属する場合、この値はユーザーへ発行されたトークンの最大存続時間になります。アカウントが <B>afs</B> のようなサーバーに対応する場合、この値は、相互認証の間 TGS がサーバーに提供し、クライアントに発行するチケットの最大存続時間になります。
<P>
<P>秒数 (<B>3600</B> は 1 時間と同じになります) を表す整数、または特定の時および分をコロンで分けて指定します。(<B>10:00</B> は 10 時間と同じになります) この引き数を省略すると、デフォルト設定値は 100:00 時間 (360000 秒) です。
<P><DT><B>-pwexpires
</B><DD>ユーザーのパスワードが変更された後に、有効にしておく日数を設定します。有効期限までの日数を指定する場合には、<B>1</B> から <B>254</B> までの整数を指定してください。パスワードに有効期限を設定しない場合には、
<B>0</B> (デフォルト) を指定してください。
<P>
<P>パスワードが失効すると、そのユーザーは認証されません。ただし、
<B>kpasswd</B> コマンドを使用してパスワードを変更すると、そのパスワードは変更後 30 日 は有効です
(その後は、管理者だけが、
<B>kas setpassword</B> コマンドを使用してパスワードを変更することができます)。クロックは、<B>kas setfields</B> コマンドが発行された時ではなく、最後にパスワードが変更された時点から開始するので注意してください。有効期限をさかのぼるのを回避するには、この引き数を指定したコマンドを発行する直前に、パスワードを変更する必要があります。
<P><DT><B>-reuse
</B><DD>最近使用した 20個の中からパスワードを選択することができるかどうか指定します。旧パスワードの再利用を可能にする場合には <B>yes</B> (デフォルト) を、最近使用した 20 個のパスワードのどれかに類似しているパスワードの再利用を不可にする場合には <B>no</B> を指定します。
<P><DT><B>-attempts
</B><DD>認証時にユーザーが無効なパスワードを連続して入力できる回数を指定します。(<B>klog</B> コマンドか、AFS トークンを認めるログイン・プログラムを使用します。)指定した回数を超えると、認証サーバーは、<B>-locktime</B> 引き数に指定された時間が経過するまで、次の試行 (ユーザーのロック解除) を拒否します。失敗回数を指定する場合には、<B>1</B> から <B>254</B> までの整数を指定してください。認証回数に制限を設定しない場合には、<B>0</B> (デフォルト) を指定してください。
<P><DT><B>-locktime
</B><DD><B>-attempts</B> 引き数に指定された制限を超えてから、認証サーバーがそのユーザーの認証要求を拒否している期間を指定します。
<P>
<P>時間と分 (<VAR>hh</VAR>:<VAR>mm</VAR>)、または分 (<VAR>mm</VAR>) のみを
<B>01</B> (1 分) から
<B>36:00</B> (36 時間) の範囲から指定します。
<B>kas</B> コマンド・インタープリターは、
<B>36:00</B> より大きい値が指定されると、この値まで戻し、次の 8.5 分の倍数まで繰り上げます。<B>0</B> (ゼロ) を設定すると、ロックアウト時間は無限にされます。この場合、管理者が <B>kas unlock</B> コマンドを発行して、アカウントのロックを解除しなければなりません。
<P><DT><B>-admin_username
</B><DD>コマンド実行時の認証サーバーによる認証で使用されるユーザー ID
を指定します。詳細については、<B>kas</B> の解説ページを参照してください。
<P><DT><B>-password_for_admin
</B><DD>コマンド発行者のパスワードを指定します。省略すると (推奨)、
<B>kas</B> コマンド・インタープリターは、プロンプトを出して、パスワードの入力を要求します。入力したパスワードは表示されません。詳細については、<B>kas</B> の解説ページを参照してください。
<P><DT><B>-cell
</B><DD>コマンドの実行を行うセルに名前を付けます。詳細については、<B>kas</B> の解説ページを参照してください。
<P><DT><B>-servers
</B><DD>接続確立時に使用させる認証サーバーを実行しているマシンの名前を指定します。詳細については、<B>kas</B> の解説ページを参照してください。
<P><DT><B>-noauth
</B><DD>コマンドの発行者に非特権 ID <B>anonymous</B> を割り当てます。詳細については、<B>kas</B> の解説ページを参照してください。
<P><DT><B>-help
</B><DD>このコマンドのオンライン・ヘルプを出力します。これ以外の有効なオプションはすべて無視されます。
</DL>
<P><STRONG>例</STRONG>
<P>次の例では、<B>admin</B> アカウントを持つ管理者が、<B>smith</B> に管理特権を与え、その項目を認証データベースに追加し、有効期限を 2000 年 12 月 31日に指しています。
<PRE>   %<B> kas setfields -name smith -flags ADMIN -expiration 12/31/2000</B>
   Password for admin:
   
</PRE>
<P>次の例では、<B>admin</B> アカウントを持つ管理者が、ユーザー <B>pat</B> のパスワードの有効期限を最終更新日から 60 日 にしています。また、パラメーターの再利用は禁止しています。
<PRE>   %<B> kas setfields -name pat -pwexpires 60 -reuse no</B>
   Password for admin:
   
</PRE>
<P><STRONG>必要となる特権</STRONG>
<P>発行者には、認証データベース項目で <TT>ADMIN</TT> フラグを設定させなければなりません。
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf046.htm#HDRKASERVERAUXDB">kaserverauxdb</A>
<P><A HREF="auarf181.htm#HDRKAS_INTRO">kas</A>
<P><A HREF="auarf185.htm#HDRKAS_EXAMINE">kas examine</A>
<P><A HREF="auarf194.htm#HDRKAS_SETPASSWORD">kas setpassword</A>
<P><A HREF="auarf197.htm#HDRKAS_UNLOCK">kas unlock</A>
<P><A HREF="auarf200.htm#HDRKLOG">klog</A>
<P><A HREF="auarf202.htm#HDRKPASSWD">kpasswd</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf192.htm">前ページ</A> &#124; <A HREF="auarf194.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
