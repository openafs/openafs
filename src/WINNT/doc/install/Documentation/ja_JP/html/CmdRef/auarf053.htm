<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3//EN">
<HTML><HEAD>
<TITLE>管理解説書</TITLE>
<!-- Begin Header Records  ========================================== -->
<!-- C:\IDWB\TEMP\idwt1068\AUARF000.SCR converted by idb2h R4.2 (359) -->
<!-- ID Workbench Version (OS2) on 24 Dec 1999 at 21:46:04            -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Shift_JIS">
<META HTTP-EQUIV="updated" CONTENT="Fri, 24 Dec 1999 21:46:02">
<META HTTP-EQUIV="review" CONTENT="Sun, 24 Dec 2000 21:46:02">
<META HTTP-EQUIV="expires" CONTENT="Mon, 24 Dec 2001 21:46:02">
</HEAD><BODY>
<!-- (C) IBM Corporation 2000. All Rights Reserved    --> 
<BODY bgcolor="ffffff"> 
<!-- End Header Records  ============================================ -->
<A NAME="Top_Of_Page"></A>
<H1>管理解説書</H1>
<P>
<H2><A NAME="HDRPACKAGECONFIG" HREF="auarf002.htm#ToC_51">package 構成ファイル</A></H2>
<P><STRONG>目的</STRONG>
<A NAME="IDX4038"></A>
<A NAME="IDX4039"></A>
<A NAME="IDX4040"></A>
<P><B>package</B> コマンドの命令を記述しています。
<P><STRONG>構文</STRONG>
<P><B>package</B> 構成ファイルには、
<B>package</B> コマンドによって、構成中の AFS クライアント・マシンのローカル・ディスクに作成または変更されるファイル・システム要素が定義されています。使用する構成ファイルを指定する場合には、<B>-config</B> または <B>-fullconfig</B> 引き数を指定して、
<B>package</B> コマンドを使用してください。
<P><B>構成ファイル内の命令の要約</B>
<P>構成ファイルの各行には、次の命令の 1 つ以上のインスタンスを記述することができます。このリストの後で、各命令の構文について詳しく説明します。
<DL>
<P><DT><B>B
</B><DD>ディスクなど、マルチバイト・コマンド・ブロック単位での入力を扱うブロック単位装置を定義します。
<P><DT><B>C
</B><DD>端末または tty など、1 文字単位での入力を扱うキャラクター専用装置を定義します。
<P><DT><B>D
</B><DD>ディレクトリーを作成します。
<P><DT><B>F
</B><DD>指定されたソース・ファイルと一致するファイルを作成または更新します。
<P><DT><B>L
</B><DD>シンボリック・リンクを作成します。
<P><DT><B>S
</B><DD>UDP および TCP/IP 接続用の通信装置となるソケットを定義します。
<P><DT><B>%define
</B><DD>変数を定義するか、または文字列を定義済みと宣言します。
<P><DT><B>%ifdef
</B><DD>特定の文字列が宣言または定義された場合に実行するアクションを指定します。
<P><DT><B>%ifndef
</B><DD>特定の文字列が宣言または定義されていない場合に実行するアクションを指定します。
<P><DT><B>%include
</B><DD>ライブラリー・ファイルを組み込みます。
<P><DT><B>%undef
</B><DD>文字列を未定義と宣言するか、あるいは変数を、値が設定されていないと宣言します。
</DL>
<P><B>ブロックおよびキャラクター単位装置を定義する B および C 命令</B>
<A NAME="IDX4041"></A>
<A NAME="IDX4042"></A>
<A NAME="IDX4043"></A>
<A NAME="IDX4044"></A>
<A NAME="IDX4045"></A>
<A NAME="IDX4046"></A>
<A NAME="IDX4047"></A>
<A NAME="IDX4048"></A>
<A NAME="IDX4049"></A>
<A NAME="IDX4050"></A>
<A NAME="IDX4051"></A>
<A NAME="IDX4052"></A>
<A NAME="IDX4053"></A>
<A NAME="IDX4054"></A>
<A NAME="IDX4055"></A>
<P><B>package</B>構成ファイルの <B>B</B>
命令は、ディスクなど、マルチバイト・コマンド・ブロック単位での入力を扱うブロック単位装置を定義します。
<B>C</B> 命令は、端末または tty など 1 文字単位での入力を扱うキャラクター単位装置を定義します。これらの命令の構文は同じです。
<PRE>   {<B>B </B>| <B>C</B>}   <VAR>device_name</VAR>  <VAR>major_device</VAR>  <VAR>minor_device</VAR>  <VAR>owner</VAR>  <VAR>group</VAR>  <VAR>mode_bits</VAR>
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>B
</B><DD>ブロック単位装置の定義を指定します。これは大文字でなければなりません。
<P><DT><B>C
</B><DD>キャラクター単位装置の定義を指定します。これは大文字でなければなりません。
<P><DT><B><VAR>device_name</VAR>
</B><DD>定義する装置名を指定します。マシンのシステム・タイプに適切な名前の形式については、ハードウェアまたはオペレーティング・システムのマニュアルを参照してください。
<P><DT><B><VAR>major_device</VAR>
</B><DD>装置のメジャー装置番号を 10 進数で指定します。マシンのシステム・タイプに適した値については、ハードウェアまたはオペレーティング・システムのマニュアルを参照してください。
<P><DT><B><VAR>minor_device</VAR>
</B><DD>装置のマイナー装置番号を 16 進数、8 進数、または 10 進数のいずれかで指定します。
16 進数の前には文字列 <B>0x</B> (ゼロと文字 <B>x</B>) を、または 8 進数の前には <B>0</B> (ゼロ) を付けます。どちらの接頭部も持たない数値は、10 進数として解釈されます。マシンのシステム・タイプに適した値については、ハードウェアまたはオペレーティング・システムのマニュアルを参照してください。
<P><DT><B><VAR>owner</VAR>
</B><DD>UNIX の <B>ls -l</B> コマンドの出力に装置の所有者であることを示すためのユーザーのユーザー名、または UNIX のユーザー ID (UID) を指定します。
<P><DT><B><VAR>group</VAR>
</B><DD>UNIX の <B>ls -lg</B> コマンドの出力に装置のグループであることを示すためのグループのグループ名、または UNIX のグループ ID (GID) を指定します。
<P><DT><B><VAR>mode_bits</VAR>
</B><DD>装置の UNIX モード・ビットを定義します。許容値は、アクセス権の組み合わせに対応する標準的な 3 または 4 桁の数字です。例: <B>755</B> は <B> rwxr-xr-x</B> を、<B>644</B> は <B>rw-r--r--</B> を意味しています。
</DL>
<P><B>ディレクトリーを作成する D 命令</B>
<A NAME="IDX4056"></A>
<A NAME="IDX4057"></A>
<A NAME="IDX4058"></A>
<A NAME="IDX4059"></A>
<A NAME="IDX4060"></A>
<A NAME="IDX4061"></A>
<A NAME="IDX4062"></A>
<P><B>package</B> 構成ファイルの <B>D</B> 命令は、ローカル・ディスク上にディレクトリーを作成します。ローカル・ディスク上に同じ名前のシンボリック・リンク、ファイル、またはその他の要素がある場合、それはディレクトリーで置き換えられます。そのディレクトリーがすでに存在する場合、その所有者、グループ、およびモード・ビットは、命令に適合するよう必要に応じて変更されます。この命令の構文は、次のとおりです。
<PRE>   <B>D</B>[<VAR>update_code</VAR>]  <VAR>directory</VAR>  <VAR>owner</VAR>  <VAR>group</VAR>  <VAR>mode_bits</VAR>
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>D
</B><DD>ディレクトリーの作成を指定します。これは大文字でなければなりません。
<P><DT><B><VAR>update_code</VAR>
</B><DD>ディレクトリー作成命令を調節します。これはオプションです。指定する場合には、文字 <B>D</B> の後にスペースを空けずに指定してください。指定可能な値は、次の 2 つです。
<P>
<DL>
<P><DT><B>X
</B><DD>ディレクトリーが <B>lost+found</B> ディレクトリー (<B>fsck</B> プログラムで使用されます) であることを示します。
<P><DT><B>R
</B><DD>構成ファイルに命令がないローカル・ディスク上のディレクトリーに存在するサブディレクトリー (その内容も含む) またはファイルを削除します。
</DL>
<P><DT><B><VAR>directory</VAR>
</B><DD>作成するディレクトリーの完全パス名を指定します。
<P><DT><B><VAR>owner</VAR>
</B><DD>UNIX の <B>ls -ld</B> コマンドの出力にディレクトリーの所有者であることを示すためのユーザーのユーザー名、または UNIX のユーザー ID (UID) を指定します。
<P><DT><B><VAR>group</VAR>
</B><DD>UNIX の <B>ls -lgd</B> コマンドの出力に、ディレクトリーのグループであることを示すためのグループのグループ名、または UNIX のグループ ID (GID) を指定します。
<P><DT><B><VAR>mode_bits</VAR>
</B><DD>ディレクトリーの UNIX モード・ビットを定義します。許容値は、アクセス権の組み合わせに対応する標準的な 3 または 4 桁の数字です。例: <B>755</B> は <B>drwxr-xr-x</B> を意味し、<B>644</B> は
<B>drw-r--r--</B> を意味しています。
</DL>
<P><B>ファイルを作成または更新する F 命令</B>
<A NAME="IDX4063"></A>
<A NAME="IDX4064"></A>
<A NAME="IDX4065"></A>
<A NAME="IDX4066"></A>
<A NAME="IDX4067"></A>
<A NAME="IDX4068"></A>
<A NAME="IDX4069"></A>
<P><B>package</B> 構成ファイルの <B>F</B>
命令は、指定されたソース・ファイルの内容をコピーして、ローカル・ディスク上のファイルを作成または更新します。このソース・ファイルは、AFS
にある場合も、ローカル・ディスクにある場合もあります。
<B>package</B> コマンド・インタープリターがソース・ファイルにアクセスできないと、構成ファイル内でいずれの命令も実行せずに終了します。
<P>同じ名前のファイルがディスクに存在する場合、<B>I</B>
更新コードが使用されていなければ、<B> package</B> コマンドは、ソース・ファイルの内容で上書きします。ファイルの現行バージョンに <B>.old</B> 拡張子を追加する場合には、<B>O</B> 更新コードを指定してください。<B>package</B> プログラムの完了後、マシンを自動的にリブートさせる場合には、<B>Q</B> 更新コードを指定してください。
<P>ローカル・ディスク上に同じ名前のシンボリック・リンク、ディレクトリー、またはその他の要素がある場合、それはファイルで置き換えられます (必要に応じて、ディレクトリーの内容が最初に削除されます)。
<P>この命令の構文は、次のとおりです。
<PRE>      <B>F</B>[<VAR>update_code</VAR>]  <VAR>file</VAR>  <VAR>source_file</VAR>  [<VAR>owner  group  mode_bits</VAR>]
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>F
</B><DD>ファイルの作成または更新を指定します。これは大文字でなければなりません。
<P><DT><B><VAR>update_code</VAR>
</B><DD>ファイルの作成命令を調節します。これはオプションです。指定する場合には、文字 <B>F</B>
の後にスペースを空けずに指定してください。次の 4 つの値が指定可能です。この中から 1 つ以上を選択してください。指定する順番は任意です。
<P>
<DL>
<P><DT><B>A
</B><DD>この値を指定すると、<VAR>source_file</VAR> フィールドのパス名が、ファイル名を含むソース・ファイルの完全なパス名であることを示します。この引き数を省略すると <B>package</B> コマンドは、<VAR>file</VAR> フィールドのパス名を、<VAR>source_file</VAR> フィールドのパス名に追加し、ソース・ファイルの完全名を作ります。このコードでは、ソース・ファイルとターゲット・ファイルの名前が異なっていても構いません。
<P><DT><B>I
</B><DD><VAR>file</VAR> という既存のファイルを保存します。このファイルは上書きされません。
<P><DT><B>O
</B><DD>既存バージョンのファイルに <B> .old</B> 拡張子を追加して、それを保存します。
<P><DT><B>Q
</B><DD>この値を指定すると、ファイルを上書きする場合に、<B>package</B> コマンドが状況コード <B>4</B> で終了します。標準の <B>package</B> に関連する変更が、マシンの AFS 初期化ファイルに対して行われていると、状況コード <B>4</B> によりマシンが自動的にリブートします。ファイルを更新してそれを有効にするために (たとえば、オペレーティング・システム・ファイル <B>/vmunix</B> あるいはそれと同等のファイルが変更された場合)、マシンをリブートしなければならない場合、このコードを使用してください。
</DL>
<P><DT><B><VAR>file</VAR>
</B><DD>作成または更新するファイルがあるローカル・ディスク上の完全なパス名を指定します。最初の要素にはファイル名を指定します。
<P><DT><B><VAR>source_file</VAR>
</B><DD>ローカル・ディスクにコピーするファイルのパス名 (ローカル または
AFS) を指定します。
<P>
<P><B>A</B> 更新コードを指定する場合には、ソース・ファイルの完全なパス名を指定してください。そうでない場合には、<B>package</B> コマンドは、このパス名に <VAR>file</VAR> パス名を追加して、ソース・ファイルの完全名を生成します。たとえば、<B>A</B> 更新コードが指定されず、
<B>/afs/abc.com/rs_aix42/bin/grep</B> ファイルが <B>/bin/grep</B> バイナリーのソース・ファイルである場合、このフィールドに適切な値は、
<B>/afs/abc.com/rs_aix42</B> になります。
<P><DT><B><VAR>owner</VAR>
</B><DD>UNIX の <B>ls -l</B> コマンドの出力にファイルの所有者であることを示すためのユーザー名、または UNIX のユーザー ID (UID) を指定します。
<P>
<P>ソース・ファイルの所有者をターゲット・ファイルにコピーする場合には、このフィールドを空のまま残してください。この場合、<VAR>group</VAR> および <VAR>mode_bits</VAR> フィールドも空にしてください。
<P><DT><B><VAR>group</VAR>
</B><DD>UNIX の <B>ls -lg</B> コマンドの出力にファイルのグループであることを示すためのグループ名、または UNIX のグループ ID (GID) を指定します。
<P>
<P>ソース・ファイルのグループをターゲット・ファイルにコピーする場合には、このフィールドを空のまま残してください。この場合、<VAR>owner</VAR> および <VAR>mode_bits</VAR>フィールドも空にしてください。
<P><DT><B><VAR>mode_bits</VAR>
</B><DD>ファイルの UNIX モード・ビットを指定します。許容値は、アクセス権の組み合わせに対応する標準的な 3 または 4 桁の数字です。例: <B>755</B> は <B> rwxr-xr-x</B> を、<B>644</B> は <B>rw-r--r--</B> を意味しています。
<P>
<P>ソース・ファイルのモード・ビットをターゲット・ファイルにコピーする場合 には、このフィールドを空のまま残してください。この場合、<VAR>owner</VAR> および <VAR>group</VAR> フィールドは空にしてください。
</DL>
<P><B>シンボリック・リンクを作成する L 命令</B>
<A NAME="IDX4070"></A>
<A NAME="IDX4071"></A>
<A NAME="IDX4072"></A>
<A NAME="IDX4073"></A>
<A NAME="IDX4074"></A>
<A NAME="IDX4075"></A>
<A NAME="IDX4076"></A>
<P><B>package</B> 構成ファイルの <B>L</B>
命令は、AFS またはローカル・ディスク上の別の場所にあるディレクトリーまたはファイルを指すシンボリック・リンクをローカル・ディスク上に作成します。標準 UNIX の <B>ln -s</B> コマンドの場合と同様に、このリンクは、実際のファイルまたはディレクトリーが存在しなくても作成されます。
<P>ローカル・ディスク上に同じ名前のファイルまたはディレクトリーがある場合、
<B>package</B> コマンドは、シンボリック・リンクで置換します。
<P>この命令の構文は、次のとおりです。
<PRE>      <B>L</B>[<VAR>update_code</VAR>]  <VAR>link</VAR>  <VAR>actual_path</VAR>  [<VAR>owner  group  mode_bits</VAR>]
    
</PRE>
<P>ここで、
<DL>
<P><DT><B>L
</B><DD>シンボリック・リンクの作成を指定します。これは大文字でなければなりません。
<P><DT><B><VAR>update_code</VAR>
</B><DD>リンク作成命令を変調します。これはオプションです。指定する場合には、文字 <B>L</B>
の後にスペースを空けずに指定してください。次のいずれかの値または両方の値を指定してください。指定する順番は任意です。
<P>
<DL>
<P><DT><B>A
</B><DD><VAR>actual_path</VAR> フィールドのパス名は、実際のディレクトリーまたはファイル (ファイルのファイル名を含む) の完全パス名であることを示します。この引き数を省略すると、<B>package</B> コマンドは、
<VAR>actual_path</VAR> フィールドのパス名に <VAR>link</VAR> フィールドの値を追加して、実際のディレクトリーまたはファイルの完全名を生成します。このコードでは、シンボリック・リンクと実際のディレクトリーまたはファイルの名前が異なっていても構いません。
<P><DT><B>I
</B><DD><VAR>link</VAR> という既存のシンボリック・リンクを上書きせずに保存します。
</DL>
<P><DT><B><VAR>link</VAR>
</B><DD>作成するシンボリック・リンクの完全なローカル・ディスクのパス名を指定します。
<P><DT><B><VAR>actual_path</VAR>
</B><DD>リンクが参照するディレクトリーまたはファイルのパス名 (ローカル または AFS) を指定します。
<B>A</B> 更新コードを指定した場合には、ディレクトリーまたはファイルの完全なパス名を指定してください。そうでない場合には、<B>package</B> コマンドは、このパス名に <VAR>link</VAR> フィールドの値を追加して、実際のディレクトリーまたはファイルの完全名を生成します。たとえば、<B>A</B> 更新コードを指定せず、<B>/etc/ftpd</B> が <B>/afs/abc.com/sun4x_56/etc/ftpd</B> ファイルを指すシンボリック・リンクである場合、このフィールドの値は、<B>/afs/abc.com/sun4x_56</B> になります。
<P>
<P><B>package</B> コマンド・インタープリターは、<B>./</B> (ピリオド、スラッシュ) または <B> ../</B> (ピリオド 2 つ、スラッシュ) 表記で始まるパス名は、<B>package</B> コマンドが呼び出される現行作業ディレクトリーを基準として解釈し、正しく処理します。
<P><DT><B><VAR>owner</VAR>
</B><DD>UNIX の <B>ls -l</B> コマンドの出力にシンボリック・リンクの所有者であることを示すためのユーザー名、または UNIX のユーザー ID (UID) を指定します。
<P>
<P>シンボリック・リンクの所有者として <B>package</B> コマンドの発行側 (通常は、ローカル・スーパーユーザー <B>root</B>)
を指定する場合には、このフィールドを空のままにしてください。この場合、<VAR>group</VAR> および <VAR>mode_bits</VAR> フィールドも空にしてください。
<P><DT><B><VAR>group</VAR>
</B><DD>UNIX の <B>ls -lg</B> コマンドの出力にリンクのグループのであることを示すためのグループ名、または UNIX のグループ ID (GID) を指定します。
<P>
<P>シンボリック・リンクのグループを <B>package</B> コマンドの発行側に関連したデフォルト・グループと一致させる場合には、このフィールドを空のままにしてください。通常、コマンドの発行側はローカル・スーパーユーザー <B>root</B> で、デフォルト・グループは、ローカルの <B>/etc/passwd</B> ファイルまたは同等のファイルにある発行側の項目で決まります。このフィールドが空のままの場合は、<VAR>owner</VAR> と <VAR>mode_bits</VAR> フィールドも空にしなければなりません。
<P><DT><B><VAR>mode_bits</VAR>
</B><DD>シンボリック・リンクの UNIX モード・ビットを定義します。許容値は、アクセス権の組み合わせに対応する標準的な 3 または 4 桁の数字です。例: <B>755</B> は <B> rwxr-xr-x</B> を、<B>644</B> は <B>rw-r--r--</B> を意味しています。
<P>
<P>このフィールドを空にすると、シンボリック・リンクのモード・ビットは
<B>777</B> (<B>rwxrwxrwx</B>) に設定されます。この場合、<VAR>owner</VAR> および <VAR>group</VAR> フィールドは空にしてください。
</DL>
<P><B>ソケットを作成する S 命令</B>
<A NAME="IDX4077"></A>
<A NAME="IDX4078"></A>
<A NAME="IDX4079"></A>
<A NAME="IDX4080"></A>
<A NAME="IDX4081"></A>
<A NAME="IDX4082"></A>
<A NAME="IDX4083"></A>
<P><B>package</B> 構成ファイルの <B>S</B>
命令は、ローカル・ディスク上に (UDP または TCP/IP 接続の通信装置となる) ソケットを作成します。この命令の構文は、次のとおりです。
<PRE>   <B>S</B>  <VAR>socket</VAR> [<VAR>owner  group  mode_bits</VAR>]
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>S
</B><DD>ソケットの作成を指定します。これは大文字でなければなりません。
<P><DT><B><VAR>socket</VAR>
</B><DD>ソケットの名前を指定します。適切な形式は、ローカル・マシンのオペレーティング・システムに依存します。
<P><DT><B><VAR>owner</VAR>
</B><DD>UNIX の <B>ls -l</B> コマンドの出力にソケットの所有者であることを示すためのユーザー名、または UNIX のユーザー ID (UID) を指定します。
<P>
<P>ソケットの所有者として <B>package</B> コマンドの発行側
(通常は、ローカル・スーパーユーザー <B>root</B> です)
を指定する場合には、このフィールドを空にしてください。この場合、<VAR>group</VAR> および <VAR>mode_bits</VAR> フィールドも空にしてください。
<P><DT><B><VAR>group</VAR>
</B><DD>UNIX の <B>ls -lg</B> コマンドの出力にソケットのグループであることを示すためのグループ名、または UNIX のグループ ID (GID) を指定します。
<P>
<P>シンボリック・リンクのグループを <B>package</B> コマンドの発行側に関連したデフォルト・グループと一致させる場合には、このフィールドを空のままにしてください。通常、コマンドの発行側はローカル・スーパーユーザー <B>root</B> で、デフォルト・グループは、ローカルの <B>/etc/passwd</B> ファイルまたは同等のファイルにある発行側の項目で決まります。このフィールドが空のままの場合は、<VAR>owner</VAR> と <VAR>mode_bits</VAR> フィールドも空にしなければなりません。
<P><DT><B><VAR>mode_bits</VAR>
</B><DD>ソケットの UNIX モード・ビットを定義します。許容値は、アクセス権の組み合わせに対応する標準的な 3 または 4 桁の数字です。例: <B>755</B> は <B> rwxr-xr-x</B> を、<B>644</B> は <B>rw-r--r--</B> を意味しています。
<P>
<P>このフィールドを空にすると、シンボリック・リンクのモード・ビットは、セルの
umask で調整され、<B>777</B>
(<B>rwxrwxrwx</B>) に設定されます。この場合、<VAR>owner</VAR> および <VAR>group</VAR> フィールドは空にしてください。
</DL>
<P><B>定義を宣言する、あるいは宣言しない %define または %undef 命令</B>
<A NAME="IDX4084"></A>
<A NAME="IDX4085"></A>
<A NAME="IDX4086"></A>
<A NAME="IDX4087"></A>
<A NAME="IDX4088"></A>
<A NAME="IDX4089"></A>
<P><B>package</B> 構成ファイルの
<B>%define</B> 命令は、引き数の数に応じて変数を宣言または定義します。
<UL>
<LI>単一引き数が後に続く場合、引き数が定義されることを宣言します。この引き数は、<B>%ifdef</B> および
<B>%ifndef</B> ステートメントで参照されるときに、コントローラーとして使用可能になります。このステートメントは、それぞれ
<B>true</B>、<B>false</B> と評価されます。
</LI><LI>2 つの引き数が後に続く場合、2 番目の引き数を最初の引き数の値として定義します。最初の引き数が、このプロトタイプまたは他のプロトタイプ、あるいはライブラリー・ファイルで変数として出てくる場合 (先頭にドル記号が付き、中括弧で囲まれています。たとえば、<TT>${variable}</TT>)、
<B>package</B> コマンド・インタープリターは、2 番目の引き数をそれに代入します。
</LI></UL>
<P><B>%undef</B> ステートメントは、引き数を未定義として宣言するか、変数の場合には変数の値を無効と宣言して、直前の
<B>%define</B> ステートメントの結果を否定します。
<P>この 2 つの命令の構文は、次のとおりです。
<PRE>   %define  <VAR>declaration</VAR>
   %define  <VAR>variable</VAR>  <VAR>value</VAR>
   %undef  <VAR>declaration</VAR>
   %undef  <VAR>variable</VAR>
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>%define
</B><DD>定義ステートメントであることを指定します。
<P><DT><B>%undef
</B><DD>定義を否定するステートメントであることを指定します。
<P><DT><B><VAR>declaration</VAR>
</B><DD><B>%define</B> ステートメントで宣言される文字列、または <B>%undef</B> ステートメントで定義を解除される文字列を指定します。
<P><DT><B><VAR>variable</VAR>
</B><DD><B>%define</B> ステートメントが定義している変数名、または <B>%undef</B> ステートメントが定義を解除している変数名を指定します。
<P><DT><B><VAR>value</VAR>
</B><DD><VAR>variable</VAR> フィールドの文字列が、このプロトタイプまたは他のプロトタイプ、あるいはライブラリー・ファイルで適切な形式 (先頭にドル記号があり、中括弧で囲まれた形式。たとえば、<TT>${variable}</TT>) で出現した場合に、その文字列を置き換える値を指定します。1 つ以上のワードを指定することができます。
</DL>
<P><B>実行する条件付きアクションを指定する %ifdef および %ifndef 命令</B>
<A NAME="IDX4090"></A>
<A NAME="IDX4091"></A>
<A NAME="IDX4092"></A>
<A NAME="IDX4093"></A>
<A NAME="IDX4094"></A>
<A NAME="IDX4095"></A>
<P><B>package</B> 構成ファイルの <B>%ifdef</B> 命令は、指示された文字列が単一の引き数の <B>%define</B> ステートメントで宣言されているか、または 2 つの引き数を取る
<B>%define</B> ステートメントで定義されている値の変数である場合に実行する
1 つ以上のアクションを指定します。
<P>同様に、<B>%ifndef</B> 命令は、指定された文字列がまだ宣言されていないか、あるいは <B>%define</B> ステートメントで定義されていないか、
<B>%undef</B> ステートメントで未定義にされたために値を持たない変数である場合に実行する
1 つ以上のアクションを指定します。
<P>いずれの場合も、オプションの <B>%else</B> ステートメントを使用して、最初のステートメントが <B>false</B> と評価された場合に実行する 1 つ以上の代替アクションを指定することができます。
(<B>%ifdef</B> ステートメントの場合、指定された文字列が宣言されていなかったり、値を持たない変数か、あるいは
<B> %undef</B> ステートメントでいずれかが未定義にされると、<B>%else</B> ステートメントが実行されます。
<B>%ifndef</B> ステートメントの場合には、文字列が宣言されるか、または値を持つ変数の場合に実行されます。)
<P><B>%ifdef</B> および <B>%ifndef</B> ステートメントは、いくつかネストすることができます。
<P>この 2 つのステートメントの構文は共通です。これらの構文は次のとおりです。
<PRE>   %ifdef | ifndef   <VAR>declaration</VAR>
                                  <VAR>action</VAR><SUP>+</SUP>
   [%else [<VAR>declaration</VAR>]
                  <VAR>alternate_action</VAR><SUP>+</SUP>]
   %endif <VAR>declaration</VAR>
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>ifdef
</B><DD><VAR>declaration</VAR> フィールドの文字列が宣言されているか、あるいは定義済みの値を持つ変数である場合にステートメントが <B>true</B> と評価されます。
<P><DT><B>ifndef
</B><DD><VAR>declaration</VAR> フィールドの文字列が宣言されていないか、あるいは定義済みの値を持たない変数である場合にステートメントが
<B>true</B> と評価されます。
<P><DT><B><VAR>declaration</VAR>
</B><DD><B>%ifdef</B> ステートメントが
<B>true</B> と評価されるために、宣言が必要な文字列、または 定義済みの値を持つ必要がある変数名を指定します。この結果、指定されたアクションが実行されます。
<B>%ifndef</B> ステートメントの場合、このステートメントが <B>true</B> と評価されるのは、文字列が宣言されていないか、あるいは変数が定義済みの値を持っていない場合です。最初と 3 番目の <VAR>declaration</VAR> は必須です (後者は、<B> %endif</B> の後に出現します)。
2 番目の <VAR>declaration</VAR> (文字列 <B>%else</B> の後にあります) はオプションです。これは、<B>%else</B> ステートメントがどの <B>%ifdef</B> あるいは <B>%ifndef</B> ステートメントに対応するのかを明確にするためにだけ使用します。
<P><DT><B><VAR>action</VAR>
</B><DD><B>%ifdef</B> または
<B>%ifndef</B> ステートメントが
<B>true</B> と評価された場合に実行するアクションを指定します。各アクションは、別々の行に指定してください。アクションには、パーセント記号および定義命令で始まるステートメントを指定することができます。
<P><DT><B><VAR>alternate_action</VAR>
</B><DD><B>%ifdef</B> または <B>%ifndef</B> ステートメントが <B>false</B> と評価される場合に実行するアクションを指定します。各アクションは、別々の行に指定してください。アクションには、パーセント記号および定義命令で始まるステートメントを指定することができます。
</DL>
<P><B>ライブラリー・ファイルを組み込む %include 命令</B>
<A NAME="IDX4096"></A>
<A NAME="IDX4097"></A>
<A NAME="IDX4098"></A>
<P><B>package</B> 構成ファイルの
<B>%include</B> 命令は、
<B>%include</B> 命令のあるプロトタイプ・ファイルのコンパイル後に、指定されたライブラリー・ファイルの内容を構成ファイルに組み込みます。この命令の構文は、次のとおりです。
<PRE>   %include  <VAR>pathname</VAR>
   
</PRE>
<P>ここで、
<DL>
<P><DT><B>%include
</B><DD>ステートメントにライブラリー・ファイルを組み込むことを指定します。
<P><DT><B><VAR>pathname</VAR>
</B><DD>組み込むライブラリー・ファイルの完全なパス名を指定します。このファイルは、AFS または ローカル・ディスクに存在し、1 つ以上の変数を持っていなければなりません。
</DL>
<P><STRONG>注意</STRONG>
<P>構成ファイルは、完全に正しくなければなりません。何らかの構文エラーまたは誤った値がある場合は、
<B>package</B> コマンド・インタープリターは、いずれの命令も実行せずに終了します。
<P><STRONG>例</STRONG>
<P>次の例では、<B>B</B> および <B>C</B> 命令により、メジャーおよびマイナー装置番号がそれぞれ <B>1</B> および <B>0</B> で、モード・ビットが、<B>-rw-r--r--</B> のディスク <B>/dev/hd0a</B> と、メジャーおよびマイナー装置番号がそれぞれ <B>6</B> および <B>5</B> で、モード・ビットが <B>-rw-rw-rw</B>の tty <B>/dev/ttyp5</B> を定義しています。いずれの場合も、所有者は <B>root</B> で、所有グループは <B>wheel</B> です。
<PRE>   B /dev/hd0a 1 0 root wheel 644
   C /dev/ttyp5 6 5 root wheel 666
   
</PRE>
<P>次の例では、<B>D</B> 命令により、所有者 <B>root</B>、グループ <B>wheel</B>、モード・ビットが <B>drwxr-xr-x</B> のローカル <B>/usr</B> ディレクトリーを作成しています。
<B>R</B> 更新コードにより、構成ファイルにはなく、<B>/usr</B> ディレクトリーに存在するファイルおよびサブディレクトリー (もしあれば) を削除しています。
<PRE>   DR /usr root wheel 755
   
</PRE>
<P>次の例は、ABC Corporation セルで AIX 4.2 を実行するマシンに適切な <B>F</B> 命令により、<B>/afs/abc.com/rs_aix42/bin/grep</B> をソースとして使用し、ローカル・ディスク・ファイル <B>/bin/grep</B> を作成または更新しています。
<PRE>   F /bin/grep /afs/abc.com/rs_aix42 root wheel 755
   
</PRE>
<P>次の例では、<B>F</B> 命令により、<B>/usr/vice/etc/ThisCell</B>ファイルを作成しています。ここでは、<B>A</B> 更新コードの指定に従って、ソース・ファイルに絶対パス名を指定しています。<B>Q</B> コードで、<B>package</B> コマンドが終了時に状況コード 4 を戻すように設定しています。これは、マシンの AFS 初期設定ファイルに、標準の <B>package</B> に関連した変更が行われると、マシンのリブートを要求します。所有者、グループおよびモード・ビットの値は指定していません。これらは、ソース・ファイルから継承されます。
<PRE>   FAQ /usr/vice/etc/ThisCell /afs/abc.com/common/etc/ThisCell
   
</PRE>
<P>次の例では、ABC Corporation セルで AIX 4.2 を実行するマシンに適切な <B>L</B> 命令により、ローカル・ディスク上の <B>/etc/ftpd</B> からファイル <B>/afs/abc.com/rs_aix42/etc/ftpd</B> へのシンボリック・リンクを作成しています。
<PRE>   L /etc/ftpd /afs/abc.com/rs_aix42 root wheel 644
   
</PRE>
<P>次の例では、<B>S</B> 命令でソケット <B>/dev/printer</B> を定義しています。
<PRE> 
   S /dev/printer root wheel 777
   
</PRE>
<P>次の例では、<B>%define</B> 命令で変数
<TT>${diskmode}</TT> に値を定義しています。この変数は、<B>D</B>、<B>F</B>、または <B>L</B> 命令の <VAR>owner_name</VAR>、<VAR>group_name</VAR>、および <VAR>mode_bits</VAR> フィールドを埋めるために、テンプレートで使用されます。
<PRE>   %define diskmode root wheel 644
    
</PRE>
<P>次の例では、<B>%undef</B> 命令により、未定義の文字列
<B>afsd</B> を宣言しています。
<PRE>   %undef afsd
   
</PRE>
<P>次の例では、<B>%ifdef</B> 命令により、文字列
<TT>rs_aix42</TT> が宣言されたら、命令を含むプロトタイプ・ファイルのコンパイル時に指定された 3 つのライブラリー・ファイルを組み込むように指定しています。代替アクションは定義されていません。プロトタイプ・ファイルの先頭のほうに、<B>rs_aix42</B>
を宣言し、<TT>${wsadmin}</TT> 変数に値を割り当てる
<B>%define</B> ステートメントが必要です。
<PRE>   %ifdef rs_aix42
   %include ${wsadmin}/lib/rs_aix42.readonly
   %include ${wsadmin}/lib/rs_aix42.generic
   %include ${wsadmin}/lib/rs_aix42.generic.dev
   %endif rs_aix42
   
</PRE>
<P>次の例では、State University セルに適切な <B>%ifndef</B> 命令により、<TT>${cell}</TT> 変数の値として <TT>stateu.edu</TT> を定義しています。
<PRE>   %ifndef cell
   %define cell stateu.edu
   %endif cell
   
</PRE>
<P>次の例では、<B>%include</B> 命令で、<B>package</B> に関連したファイルが常駐するディレクトリーの <B>lib</B> サブディレクトリーからライブラリー・ファイル <B>base.generic</B> を組み込んでいます。コンパイル時に、<TT>${wsadmin}</TT> 変数は実際のパス名 (<B>/afs/abc.com/wsadmin</B> など)に解決されます。
<PRE>   %include ${wsadmin}/lib/base.generic
   
</PRE>
<P><STRONG>関連情報 </STRONG>
<P><A HREF="auarf204.htm#HDRPACKAGE">package</A>
<P>
<P><HR><B>&#91; <A HREF="#Top_Of_Page">ページのトップ</A> &#124; <A HREF="auarf052.htm">前ページ</A> &#124; <A HREF="auarf054.htm">次ページ</A> &#124; <A HREF="auarf002.htm#ToC">目次</A> &#124; <A HREF="auarf284.htm#HDRINDEX">索引</A> &#93;</B> 
<!-- Begin Footer Records  ========================================== -->
<P><HR><B> 
<br>(C) <A HREF="http://www.ibm.com/">IBM Corporation 2000.</A>  All Rights Reserved 
</B> 
<!-- End Footer Records  ============================================ -->
<A NAME="Bot_Of_Page"></A>
</BODY></HTML>
